function validateEmail(){var t=$("#countdown-promo-email").val(),e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return""!==t&&e.test(t)}function saveEventReminder(t){var e=$(".hero-title .eyebrow"),a=$("#countdown-promo-email").val(),i=$("#eventCode").val(),r=$("#eventSubmitUrl").val();$.get(r,{email:a,eventCode:i},function(a){return"SUCCESS"!=a?($("#reminderErrMessage").html('<span class="eyebrow">Error Setting reminder</span>'),!1):(t(),void e.show())})}!function(){window.hybris=window.hybris?window.hybris:{},hybris.fav={save:function(t,e){var a=$(t);if(a.is("#sign-in-overlay"))return void($("#header-nav-favorites").is("._active")||$("#mobile-menu.mm-opened .sub-menu-wishlist.mm-opened").length>0?a.attr("data-redirect-url",hybris.contextPath+"/wishlist/saved-items").removeAttr("data-save-item"):($("#header-nav-signin").is("._active")||$("#header-nav-bag-wrapper").is("._active")||$("#mobile-menu.mm-opened .sub-menu-signin.mm-opened").length>0)&&this.restore(t));if(void 0!==e){var i=a.find('[href="#sign-in-overlay"]');if(1==i.length&&void 0!==e.attr("data-save-item")&&($("#sign-in-overlay").attr("data-redirect-url",window.location.href).attr("data-save-item",e.attr("data-save-item")),$("#form-create-account").attr("data-redirect-url",window.location.href).attr("data-save-item",e.attr("data-save-item")),e.is(".button-wishlist"))){var r=e.parents("li.baglist-item-summary");$("#sign-in-overlay").attr("data-shopping-bag",r.data("item-unique-index")),$("#form-create-account").attr("data-shopping-bag",r.data("item-unique-index"))}}},restore:function(t){var e=hybris.contextPath+"/my-account",a=$(t);a.is("#sign-in-overlay, #form-create-account")&&($("#sign-in-overlay").attr("data-redirect-url",e).removeAttr("data-save-item").removeAttr("data-shopping-bag"),$("#form-create-account").removeAttr("data-redirect-url").removeAttr("data-save-item").removeAttr("data-shopping-bag"))},createAccountCB:function(){this.redirect($("#form-create-account"))},signInCB:function(){this.redirect($("#sign-in-overlay"))},redirect:function(t){if(void 0!==t.attr("data-redirect-url"))if(void 0===t.attr("data-save-item"))window.location=t.attr("data-redirect-url");else if(void 0!==t.attr("data-shopping-bag"))$.post(hybris.contextPath+"/wishlist/ajaxSaveItem",{productId:t.attr("data-save-item"),CSRFToken:hybris.CSRFToken},function(){$.get(hybris.contextPath+"/cart/ajax/shopping-bag-remove-item.json",{"unique-entry-number":t.attr("data-shopping-bag"),qty:"0"},function(){window.location=t.attr("data-redirect-url")})});else{var e=t.attr("data-save-item"),a=$("#product-details-selected-size").val();-1!=a&&void 0!==a&&(e=a),$.post(hybris.contextPath+"/wishlist/ajaxSaveItem",{productId:e,CSRFToken:hybris.CSRFToken}).done(function(e){var a=window.location.href.replace(/#[^#]*$/,""),i=t.attr("data-redirect-url").replace(/#[^#]*$/,"");a==i?location.reload():location.href=t.attr("data-redirect-url")})}else t.is("#form-create-account")&&(window.location=hybris.contextPath+"/my-account?create=true")}},hybris["hero-countdown"]={bindSubmit:function(t,e,a){t.on("click",function(t){validateEmail()?saveEventReminder(a):$("#incorrectEmail").html('<span class="eyebrow">Incorrect Email</span>'),e(t)})}}}();