define(["jquery","eventDispatcher","handlebars","savedItems","trackViewItemList"],function(e,t,i,a,r){function n(t,n,s,m){var o=t.products,u=e(".search-result article").length,c=e(".content.search-result").attr("data-listName"),l=1,f="",p=e("#"+n.replace("-rest","")).html(),h="undefined"==typeof t.numberOfPages?-1:t.numberOfPages,g="undefined"==typeof t.currentPage?-1:t.currentPage,I=("undefined"==typeof t.searchPageSize?-1:t.searchPageSize,i.compile(p)),E="undefined"!=typeof o.maxStandard?o.maxStandard:o.items.length,M="undefined"!=typeof o.maxMedium?o.maxMedium:o.items.length,R="undefined"!=typeof o.maxSmall?o.maxSmall:o.items.length;E=null===E?o.items.length:E;var D=n.indexOf("-rest")>2||h-1==g,L=[];for(var v in o.items){var y={},O=o.items[v],A=d.GRID;"undefined"!=typeof o.items[v].isFeatured&&(A+=" "+d.GRID+d.FEATURED+o.items[v].isFeatured),A+=M>=l?" "+d.GRID+d.MEDIUM:" "+d.GRID+d.MEDIUM+d.REMOVE,A+=R>=l?" "+d.GRID+d.SMALL:" "+d.GRID+d.SMALL+d.REMOVE,o.items[v].productClass=A;var P=parseInt(v,10)+u+1;if(o.items[v].productLink=o.items[v].productLink,o.items[v].position=P,o.items[v].listName=c,o.items[v].categoryPath=O.categoryPath,!(E>=l))break;f+=I(o.items[v]),l++,y.name=O.title,y.id=O.productCode,y.price=O.rawPrice,y.dimension5=O.saleType,y.category=O.categoryPath,y.variant=O.variant,y.list=m,y.position=P,L.push(y)}return r.trackViewItemList(L,s,dataLayer),f+='<div class="'+d.LOAD_MORE_CONTAINER+' _no-content"></div>',e('a[href="'+n+'"]').attr("href",n+"-rest"),a.fillSavedItems(),{html:f,hideButton:D}}function s(){}var d={GRID:"product-tiles-grid-item",MEDIUM:"-medium",SMALL:"-small",REMOVE:"-remove",FEATURED:"-featured",LINK:"/p/",LOAD_MORE_CONTAINER:"product-tiles-grid-load-content"};return t.dispatchAndListen("gucciJsonHtml",s),{compiler:function(e,t,i,a){return n(e,t,i,a)}}});