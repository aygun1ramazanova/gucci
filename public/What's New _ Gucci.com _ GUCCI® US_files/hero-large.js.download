define(["jquery","eventDispatcher","breakpoints","viewport","os","imageLoader","fittext","heroResize"],function(e,t,i,a,s,h,r,n){function o(){m=v.hasClass("hero-tall")||v.hasClass("hero-regular")||v.hasClass("hero-short")?0:e("#header-main").height(),i.is("small")?d=u.SMALL:i.is("medium")?d=u.MEDIUM:i.is("standard")&&(d=p.length>0?u.STANDARD_MEDIUM:u.STANDARD_LARGE)}function l(t){setTimeout(function(){var a,h,r,o=e(window).width();if(f.removeAttr("style"),a=i.is("small")&&s.isCompatible()?document.documentElement.clientHeight:t.height,i.is("standard")){var l=e(".hero-background-image-large").height(),g=a-m-d;if(l>g)r=g,h=g+"px";else{if(0==m)var c=2.1;else var c=2.5;p.length>0&&(c=0==m?2.3:3),r=c/1*o-(m+d),h=r+"px"}}f.each(function(t){if(0===t){var i=e(this).find(".hero-content-centered").height(),a=i>r?i:r+"px",s=e(this).css("min-height").replace("px","");if(s>r)var n={"max-height":a,"min-height":a};else var n={"max-height":a};e(this).css(n)}else{var l="-"+e(this).parents(".content.gutter.capsule-content-wrapper").css("padding-left");e(this).css({"max-height":h,width:+o+"px",left:l,position:"relative"})}if(e(this).hasClass("hero-large_anchorage")){var g=e(this),c=e(".hero-background-image-large:eq(0)",e(this)),m=c.height()%2===0?c.height():c.height()-1;c[0].complete?g.css("height",m):c.on("load",function(){g.css("height",m)})}e("#hp-hero-carousel .hero-homepage").each(function(){e(this).removeAttr("style")})}),n.resizeHero()},0)}function g(){var t,s=e(".dummy-hero-background-image");!i.is("small")&&s.length&&(t=e(new Image),s.removeClass("dummy-hero-background-image").removeClass("_prevent-load"),e.each(s[0].attributes,function(){this.specified&&t.attr(this.name,s.attr(this.name))}),s.replaceWith(t),h.loadImage(t.parent()),t.one("load",function(){l(a.get())}))}function c(){l(a.get())}var m,u={SMALL:0,MEDIUM:30,STANDARD_LARGE:120,STANDARD_MEDIUM:200},d=0,f=e(".hero-large"),p=e(".hero-medium"),v=e(".hero");if(v.hasClass("hero-big")||v.hasClass("hero-regular"))var u={STANDARD_LARGE:160};return{load:function(){function s(){}g(),o(),l(a.get()),i.change(function(){o(),g()}),a.resize(function(){l(a.get())}),t.dispatchAndListen("heroLarge",s),e("html").hasClass("mobile")&&!e("body").hasClass("new-design")&&jQuery(".hero-title").fitText()},initHeroImage:c}});