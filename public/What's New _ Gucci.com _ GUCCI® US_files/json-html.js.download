define(["jquery","eventDispatcher","handlebars","savedItems"],function(e,t,i,r){function n(e,t){switch(t){case"looks-detail":return s(e,t);case"product-tiles-grid":case"product-tiles-grid-rest":case"search-results-grid":case"search-results-grid-rest":return a(e,t);case"looks-grid-item":return d(e,t);case"search-looks-grid":case"search-looks-grid-rest":return l(e,t);case"product-tiles-grid-2":case"product-tiles-grid-3":case"product-tiles-grid-reset":return o(e,t);case"header-my-account-menu":return m(e,t)}}function s(t){var r,n;M=2,g="",O=e("#product-tiles-grid").html(),p=i.compile(O),n=e.map(t[0],function(t){r=t.items,e("."+f.LOOKS_GALLERY_CLASS).removeClass().addClass(f.LOOKS_GALLERY_CLASS),M++});for(var s=0;s<r.length;s++)r.length>4&&s%5===0&&(r[s].lookGalleryBigImage=!0),h=I.GRID,void 0!==r[s].isFeatured&&(h+=" "+I.GRID+I.FEATURED+r[s].isFeatured),h+=" "+I.GRID+I.MEDIUM,h+=" "+I.GRID+I.SMALL,r[s].productClass=h,r[s].productLink=I.LINK+r[s].productCode,r[s].listName="LookDetailsPage",r[s].position=s+1,g+=p(r[s]);return e("."+f.LOOKS_GALLERY_CLASS).addClass(f.LOOKS_GALLERY_CLASS+"-"+r.length+"-items"),g+='<div class="'+f.CONTAINER_ITEMS+'"></div>',{html:g}}function a(t,n){var s=t.products;M=1,g="";var a=e("#"+n.replace("-rest","")).html(),o="undefined"==typeof t.numberOfPages?-1:t.numberOfPages,d="undefined"==typeof t.currentPage?-1:t.currentPage;p=i.compile(a),c="undefined"!=typeof s.maxStandard?s.maxStandard:s.items.length,R="undefined"!=typeof s.maxMedium?s.maxMedium:s.items.length,E="undefined"!=typeof s.maxSmall?s.maxSmall:s.items.length,c=null===c?s.items.length:c,S=n.indexOf("-rest")>2||o-1==d;for(var l in s.items){if(h=I.GRID,"undefined"!=typeof s.items[l].isFeatured&&(h+=" "+I.GRID+I.FEATURED+s.items[l].isFeatured),h+=R>=M?" "+I.GRID+I.MEDIUM:" "+I.GRID+I.MEDIUM+I.REMOVE,h+=E>=M?" "+I.GRID+I.SMALL:" "+I.GRID+I.SMALL+I.REMOVE,s.items[l].productClass=h,!(c>=M))break;g+=p(s.items[l]),M++}return g+='<div class="'+I.LOAD_MORE_CONTAINER+' _no-content"></div>',e('a[href="'+n+'"]').attr("href",n+"-rest"),r.fillSavedItems(),{html:g,hideButton:S}}function o(t,r){var n=t.products;M=1,g="",O=e("#"+r).html(),p=i.compile(O),c="undefined"!=typeof n.maxStandard?n.maxStandard:n.items.length,R="undefined"!=typeof n.maxMedium?n.maxMedium:n.items.length,E="undefined"!=typeof n.maxSmall?n.maxSmall:n.items.length;for(var s in n.items){if(h=I.GRID,"undefined"!=typeof n.items[s].isFeatured&&(h+=" "+I.GRID+I.FEATURED+n.items[s].isFeatured),h+=R>=M?" "+I.GRID+I.MEDIUM:" "+I.GRID+I.MEDIUM+I.REMOVE,h+=E>=M?" "+I.GRID+I.SMALL:" "+I.GRID+I.SMALL+I.REMOVE,n.items[s].productClass=h,n.items[s].productLink=I.LINK,!(c>=M))break;g+=p(n.items[s]),M++}return g+='<div class="'+I.LOAD_MORE_CONTAINER+' _no-content"></div>',{html:g}}function d(t,r){var n=t.looks;return D=e("."+L.GRID+":visible").length+1,S=!0,M=1,g="",O=e("#"+r).html(),p=i.compile(O),R="undefined"!=typeof n.maxMedium?n.maxMedium:n.items.length,E="undefined"!=typeof n.maxSmall?n.maxSmall:n.items.length,n.items.forEach(function(e){h=L.GRID,h+=R>=M?" "+L.GRID+L.MEDIUM:" "+L.GRID+L.MEDIUM+L.REMOVE,h+=E>=M?" "+L.GRID+L.SMALL:" "+L.GRID+L.SMALL+L.REMOVE,e.lookClass=h,e.haveNumbers=n.haveNumbers,e.lookLink=L.LINK,e.lookCount=D,g+=p(e),M++,D++}),g+='<div class="'+L.LOAD_MORE_CONTAINER+' _no-content"></div>',{html:g,hideButton:S}}function l(t,r){var n=t.looks;return D=e("."+L.GRID).length+1,M=1,g="",S="search-looks-grid-rest"===r?!0:!1,O=e("#"+r).html(),p=i.compile(O),R="undefined"!=typeof n.maxMedium?n.maxMedium:n.items.length,E="undefined"!=typeof n.maxSmall?n.maxSmall:n.items.length,n.items.forEach(function(e){h=L.GRID,h+=R>=M?" "+L.GRID+L.MEDIUM:" "+L.GRID+L.MEDIUM+L.REMOVE,h+=E>=M?" "+L.GRID+L.SMALL:" "+L.GRID+L.SMALL+L.REMOVE,e.lookClass=h,e.haveNumbers=n.haveNumbers,e.lookLink=L.LINK,e.lookCount=D,g+=p(e),M++,D++}),g+='<div class="'+L.LOAD_MORE_CONTAINER+' _no-content"></div>',e('a[href="'+r+'"]').attr("href",r+"-rest"),{html:g,hideButton:S}}function m(t,r){var n=t.myOrders,s=t.favoritesCount,a={};return a.myOrders=n,a.favoritesCount=s,O=e("#"+r).html(),p=i.compile(O),{html:p(a)}}function u(){}var c,R,E,f={LOOKS_GALLERY_CLASS:"look-gallery",CONTAINER_ITEMS:"content-looks-gallery-items"},I={GRID:"product-tiles-grid-item",MEDIUM:"-medium",SMALL:"-small",REMOVE:"-remove",FEATURED:"-featured",LINK:"/-p-",LOAD_MORE_CONTAINER:"product-tiles-grid-load-content"},L={GRID:"looks-grid-item",MEDIUM:"-medium",SMALL:"-small",REMOVE:"-remove",LINK:"/look/",LOAD_MORE_CONTAINER:"looks-grid-load-content"},M=1,D=1,h="",O="",p="",g="",S=!1;return t.dispatchAndListen("jsonHtml",u),{compiler:function(e,t){return n(e,t)}}});