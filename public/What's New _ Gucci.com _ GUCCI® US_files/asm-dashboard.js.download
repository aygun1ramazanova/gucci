function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}define(["exports","ajaxConfig","handlebars","genericUtilities","gtmUtilities","silentCALogout"],function(a,b,c,d,e,f){"use strict";function g(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(g=function _getRequireWildcardCache(a){return a?c:b})(a)}function h(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!==_typeof(a)&&"function"!=typeof a)return{default:a};var c=g(b);if(c&&c.has(a))return c.get(a);var d={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!=f&&Object.prototype.hasOwnProperty.call(a,f)){var h=e?Object.getOwnPropertyDescriptor(a,f):null;h&&(h.get||h.set)?Object.defineProperty(d,f,h):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}function i(){function a(a,b,c){return Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}),a[b]}function b(a,b,c,e){var f=b&&b.prototype instanceof d?b:d,g=Object.create(f.prototype),h=new n(e||[]);return t(g,"_invoke",{value:j(a,c,h)}),g}function c(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}function d(){}function e(){}function f(){}function g(b){["next","throw","return"].forEach(function(c){a(b,c,function(a){return this._invoke(c,a)})})}function h(a,b){function d(e,f,g,h){var i=c(a[e],a,f);if("throw"!==i.type){var j=i.arg,k=j.value;return k&&"object"==_typeof(k)&&s.call(k,"__await")?b.resolve(k.__await).then(function(a){d("next",a,g,h)},function(a){d("throw",a,g,h)}):b.resolve(k).then(function(a){j.value=a,g(j)},function(a){return d("throw",a,g,h)})}h(i.arg)}var e;t(this,"_invoke",{value:function value(a,c){function f(){return new b(function(b,e){d(a,c,b,e)})}return e=e?e.then(f,f):f()}})}function j(a,b,d){var e="suspendedStart";return function(f,g){if("executing"==e)throw new Error("Generator is already running");if("completed"==e){if("throw"===f)throw g;return p()}for(d.method=f,d.arg=g;;){var h=d.delegate;if(h){var i=k(h,d);if(i){if(i===y)continue;return i}}if("next"===d.method)d.sent=d._sent=d.arg;else if("throw"===d.method){if("suspendedStart"==e)throw e="completed",d.arg;d.dispatchException(d.arg)}else"return"===d.method&&d.abrupt("return",d.arg);e="executing";var j=c(a,b,d);if("normal"===j.type){if(e=d.done?"completed":"suspendedYield",j.arg===y)continue;return{value:j.arg,done:d.done}}"throw"===j.type&&(e="completed",d.method="throw",d.arg=j.arg)}}}function k(a,b){var d=b.method,e=a.iterator[d];if(void 0===e)return b.delegate=null,"throw"===d&&a.iterator.return&&(b.method="return",b.arg=void 0,k(a,b),"throw"===b.method)||"return"!==d&&(b.method="throw",b.arg=new TypeError("The iterator does not provide a '"+d+"' method")),y;var f=c(e,a.iterator,b.arg);if("throw"===f.type)return b.method="throw",b.arg=f.arg,b.delegate=null,y;var g=f.arg;return g?g.done?(b[a.resultName]=g.value,b.next=a.nextLoc,"return"!==b.method&&(b.method="next",b.arg=void 0),b.delegate=null,y):g:(b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,y)}function l(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]),2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]),this.tryEntries.push(b)}function m(a){var b=a.completion||{};b.type="normal",delete b.arg,a.completion=b}function n(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(l,this),this.reset(!0)}function o(a){if(a){var b=a[v];if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var c=-1,d=function b(){for(;++c<a.length;)if(s.call(a,c))return b.value=a[c],b.done=!1,b;return b.value=void 0,b.done=!0,b};return d.next=d}}return{next:p}}function p(){return{value:void 0,done:!0}}i=function _regeneratorRuntime(){return q};var q={},r=Object.prototype,s=r.hasOwnProperty,t=Object.defineProperty||function(a,b,c){a[b]=c.value},u="function"==typeof Symbol?Symbol:{},v=u.iterator||"@@iterator",w=u.asyncIterator||"@@asyncIterator",x=u.toStringTag||"@@toStringTag";try{a({},"")}catch(b){a=function define(a,b,c){return a[b]=c}}q.wrap=b;var y={},z={};a(z,v,function(){return this});var A=Object.getPrototypeOf,B=A&&A(A(o([])));B&&B!==r&&s.call(B,v)&&(z=B);var C=f.prototype=d.prototype=Object.create(z);return e.prototype=f,t(C,"constructor",{value:f,configurable:!0}),t(f,"constructor",{value:e,configurable:!0}),e.displayName=a(f,x,"GeneratorFunction"),q.isGeneratorFunction=function(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===e||"GeneratorFunction"===(b.displayName||b.name))},q.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,f):(b.__proto__=f,a(b,x,"GeneratorFunction")),b.prototype=Object.create(C),b},q.awrap=function(a){return{__await:a}},g(h.prototype),a(h.prototype,w,function(){return this}),q.AsyncIterator=h,q.async=function(a,c,d,e,f){void 0===f&&(f=Promise);var g=new h(b(a,c,d,e),f);return q.isGeneratorFunction(c)?g:g.next().then(function(a){return a.done?a.value:g.next()})},g(C),a(C,x,"Generator"),a(C,v,function(){return this}),a(C,"toString",function(){return"[object Generator]"}),q.keys=function(a){var b=Object(a),c=[];for(var d in b)c.push(d);return c.reverse(),function a(){for(;c.length;){var d=c.pop();if(d in b)return a.value=d,a.done=!1,a}return a.done=!0,a}},q.values=o,n.prototype={constructor:n,reset:function reset(a){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(m),!a)for(var b in this)"t"===b.charAt(0)&&s.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=void 0)},stop:function stop(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function dispatchException(a){function b(b,d){return f.type="throw",f.arg=a,c.next=b,d&&(c.method="next",c.arg=void 0),!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;0<=d;--d){var e=this.tryEntries[d],f=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var g=s.call(e,"catchLoc"),h=s.call(e,"finallyLoc");if(g&&h){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(!g){if(!h)throw new Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}}},abrupt:function abrupt(a,b){for(var c,d=this.tryEntries.length-1;0<=d;--d)if(c=this.tryEntries[d],c.tryLoc<=this.prev&&s.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var e=c;break}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);var f=e?e.completion:{};return f.type=a,f.arg=b,e?(this.method="next",this.next=e.finallyLoc,y):this.complete(f)},complete:function complete(a,b){if("throw"===a.type)throw a.arg;return"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b),y},finish:function finish(a){for(var b,c=this.tryEntries.length-1;0<=c;--c)if(b=this.tryEntries[c],b.finallyLoc===a)return this.complete(b.completion,b.afterLoc),m(b),y},catch:function _catch(a){for(var b,c=this.tryEntries.length-1;0<=c;--c)if(b=this.tryEntries[c],b.tryLoc===a){var d=b.completion;if("throw"===d.type){var e=d.arg;m(b)}return e}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(a,b,c){return this.delegate={iterator:o(a),resultName:b,nextLoc:c},"next"===this.method&&(this.arg=void 0),y}},q}function j(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function k(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){j(h,d,e,f,g,"next",a)}function g(a){j(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}function l(a,b){var c={action:a,label:b,category:"iPad-in-store"};window.analyticsSdk.tracking.sendEvent("assistedSales.".concat(a),c)}Object.defineProperty(a,"__esModule",{value:!0}),a.load=a.getStoresList=a.escapeHTML=a.checkEmail=a.bindChangeStore=a.SelectStoreAtFirst=a.SSALinkMenu=a.SSAGetArctivation=a.SSACheckStartSession=void 0,b=h(b),c=h(c);var m,n,o=b.config.ASM_GET_CUSTOMER_DATA,p=b.config.ASM_CUSTOMER_AUTOCOMPLETE,q=b.config.ASM_LIST_CUSTOMERS,r=b.config.ASM_QUIT,s=b.config.ASM_QUIT_EAAU,t=b.config.GET_ASSISTANT_STORE_ACTIVATION,u=b.config.SALES_ASSISTANT_STORES,v=5,w=document.querySelector("body"),x=document.querySelector("#js-asm-wrapper")?document.querySelector("#js-asm-wrapper").dataset.autocomplete:null,y=document.querySelector("#header-main-checkout"),z=document.querySelector("#header-order-confirmation"),A=document.querySelector("#ssa-logged-in"),B=document.querySelector("._blocked"),C={},D={},E=null,F=null,G=null,H={};H.distanceSales={};var I="ga_asm",J="asm_data",K="user_info",L=function getLocalStore(a){return JSON.parse(localStorage.getItem(a))},M=function StorageData(a){var b=JSON.stringify(C);switch(a){case"update":localStorage.setItem(J,b);break;case"get":return L(J);case"remove":localStorage.removeItem(J),localStorage.removeItem(I);break;default:}return""},N=function escapeHTML(a){return a.replace(/[ %<>"+&“”’]/g,function(a){return{" ":"%20","%":"%25","<":"%3C",">":"%3E",'"':"%22","+":"%2B","&":"%26","“":"%22","”":"%22","’":"'"}[a]})};a.escapeHTML=N;var O=function checkEmail(a){var b=!1,c=new RegExp(/^[^@]+@[^@]+\.[^@]+$/i);return b=c.test(a),b};a.checkEmail=O;var P=function getTouches(a){return a.touches},Q=function handleTouchStart(a){var b=P(a)[0];E=b.clientX,F=b.clientY},R=function handleTouchMove(a){var b=Math.abs;if(E&&F){var c=a.touches[0].clientX,d=a.touches[0].clientY,e=E-c,f=F-d;b(e)>b(f)||V(),E=null,F=null}},S=function dataLayer(){var a={sales_associate:M("get").asmID,online_in_store:"in_store",sa_store_name:M("get").currentStore};window.dataLayer.push(a)},T=function OSATracking(a){var b={},c={},d=null;b.userAsm=C.asmID,b.impersKlientID=G,c.asmID=C.asmID,c.impersKlientID=G,C.asmCustomerData&&(b.cartID=C.asmCustomerData.cartId,c.cartID=C.asmCustomerData.cartId,b.customerType="anonymous"===C.asmCustomerData.customerId?"guest":"registered",c.customerType="anonymous"===C.asmCustomerData.customerId?"guest":"registered");var f=JSON.stringify(b);"start"===a?(localStorage.setItem(I,f),d="session start"):"stop"===a?(c.cartID=L(I).cartID,c.customerType=L(I).customerType,c.impersKlientID=L(I).impersKlientID,localStorage.removeItem(I),d="session stop"):d=null,C.isClickOnStopsession=!1,M("update"),d&&(0,e.safeGTMuaEventsPusher)("interactionEvent","impersonification",d,"",c)},U=function tooglePanelBackground(a){var b="asm-panel-bg__locker";a?w.classList.add("asm-panel-bg__locker"):w.classList.remove("asm-panel-bg__locker")},V=function togglePanel(){var a=document.querySelector("#js-asm-dashboard__panel"),b=document.querySelector("#js-asm-dashboard__background");a.classList.toggle("_compressed"),b.classList.toggle("_show"),C.isPanelOpen=!M("get").isPanelOpen,U(C.isPanelOpen),M("update")},W=function logOut(){var a=M("get"),b=a.logoutUrl;M("remove"),window.location.href=b},X=function blockBgScroll(a){"on"===a?w.classList.add("overlay-lock"):w.classList.remove("overlay-lock")},Y=function clearErrorLabel(){var a=document.querySelectorAll(".input");a.forEach(function(a){a.classList.remove("_error")})},Z=function renderPanel(a){m=document.querySelector("#js-asm-wrapper"),n=document.querySelector("#js-asm-wrapper-template");var b=n.innerHTML,d=c.compile(b);m.innerHTML=d(M("get")),(null===a||a===void 0)&&Y(),ja()},$=function activateStartSessionBtn(a){var b=document.querySelector("#js-asm-start");"on"===a?b.classList.remove("_disabled"):b.classList.add("_disabled")},_=function getCustomer(a){var b=C.autocomplete[a.key],c=null===b.carts?"":b.carts[0],d=[b.email,b.value,c];C.customerId=d[0],C.customerName=d[1],C.cartId=d[2],M("update"),Z(),$("on")},aa=function manageActivationSessionButton(){var a=!1,b=!1,c=0,d=document.querySelectorAll("#js-asm-dashboard__panel .js-check-input");d.forEach(function(d){var e=d.value,f=d.id,g=e.length;switch(c+=g,f){case"js-customer-email":a="true"===x?g>v||0===g:0<g&&O(e)||0===g;break;case"js-customer-cartId":b=g>v||0===g;break;default:}}),a&&b&&c>v?$("on"):$("off")},ba=function bindAutocompleteItem(){var a=document.querySelectorAll(".js-asm-autocomplete-item"),b=document.querySelector(".js-asm-autocomplete-close");a&&(a.forEach(function(a){return a.addEventListener("click",function(a){X(),_(a.target.dataset)})}),b.addEventListener("click",function(){X(),Z(),aa()}))},ca=function renderAutocomplete(){var a=n.innerHTML,b=c.compile(a);m.innerHTML=b(M("get")),ba()},da=function customerAutocomplete(a){m=document.querySelector("#js-asm-autocomplete"),n=document.querySelector("#js-asm-autocomplete-template");var b="".concat(p,"?customerId=").concat(N(a));$("off"),a.length>v?(C.isAutocompleteLoaded=!1,M("update"),ca(),fetch("".concat(b)).then(function(a){return a.json()}).then(function(a){C.isAutocompleteLoaded=!0,0<a.length?(C.autocomplete=a,C.isAutocompleteEmpty=!1,M("update"),ca(),X("on")):(C.isAutocompleteEmpty=!0,M("update"),ca(),$("off"))}).catch(function(a){console.log("Error ",a)})):m.innerHTML=""},ea=function retriveSessionData(){var a=document.querySelector("#js-customer-email").value,b=document.querySelector("#js-customer-name").value,c=document.querySelector("#js-customer-cartId").value;document.querySelector("input[name=customerId]").value=a,document.querySelector("input[name=customerName]").value=a?b:"",document.querySelector("input[name=cartId]").value=c},fa=function startSession(){var a=document.querySelector("#js-asm-session");ea(),a.submit()},ga=function stopSession(){var a=document.querySelector("#js-asm-session");C.isClickOnStopsession=!0,M("update"),a.submit()},ha=function getCustomersList(){var a="".concat(q,"?customerListUId=myRecentCustomerSessions");fetch("".concat(a)).then(function(a){return a.json()}).then(function(a){D=a,D.forEach(function(a,b){D[b].isNotCurrentUser=!M("get").asmCustomerData||a.uid!==M("get").asmCustomerData.customerId}),m=document.querySelector("#js-asm-overlay"),n=document.querySelector("#js-asm-customer-template");var b=n.innerHTML,d=c.compile(b);m.innerHTML=d(D),X("on"),ja()}).catch(function(a){console.log("Error ",a)})},ia=function closeOverlay(){m=document.querySelector("#js-asm-overlay"),m.innerHTML="",X(),ja()},ja=function bindEvent(){var a=document.querySelector("#js-customer-email"),b=document.querySelector("#js-asm-toggle"),c=document.querySelectorAll("input"),d=document.querySelector("#js-asm-logout"),e=document.querySelector("#js-asm-start"),f=document.querySelector("#js-asm-stop"),g=document.querySelectorAll(".js-asm-customers"),h=document.querySelector("#js-asm-overlay-close");b.addEventListener("click",function(){V()}),b.addEventListener("touchstart",Q,!1),b.addEventListener("touchmove",R,!1),c.forEach(function(a){a.addEventListener("focus",function(){Y(),aa()}),a.addEventListener("keyup",function(){aa()})}),d&&d.addEventListener("click",function(){W()}),a&&"true"===x&&a.addEventListener("keyup",function(a){da(a.target.value)}),e&&e.addEventListener("click",function(a){a.preventDefault(),fa()}),f&&f.addEventListener("click",function(){ga()}),h&&h.addEventListener("click",function(){ia()}),g&&g.forEach(function(a){return a.addEventListener("click",function(){ha()})})},ka=function setupGTM(){Z("loadPage"),M("update");var a="none",b=!!localStorage.getItem(I),c=!!localStorage.getItem(K);(C.asmCustomerData&&!b||C.isClickOnStopsession)&&(a=C.isClickOnStopsession?"stop":"start"),"start"!=a||c?T(a):setTimeout(function(){T(a)},2e3)},la=function SSACheckStartSession(a){var b=/signin|microsoftonline|assisted-service/;return b.test(a)};a.SSACheckStartSession=la;var ma=function SSAtracking(a,b){function c(c,d){(0,e.safeGTMuaEventsPusher)("interactionEvent","iPad-in-store",c,d),l(a,b)}switch(a){case"startSession":{var d=document.referrer;if(la(d)){var f=M("get").eaau?"ssa-eaau":"ssa-no_eaau";c("startSession",f)}break}case"openOverlay":c("openOverlay",b);break;case"changeStore":c("changeStore",b);break;case"logout":c("logout",b);break;default:}},na=function insertAfter(a,b){b.parentNode.insertBefore(a,b.nextSibling)},oa=function SSADeactivateOverlay(){A.classList.remove("_blocked"),A.classList.remove("_active"),A.style.display="none"},pa=function SSAOpenOverlay(){A.classList.add("_active"),A.style.display="block"},qa=function SSAGetCountryLang(){var a=window.location.href,b=a.split("/"),c=b[3],d=b[4].split("#")[0].split("?")[0];H.distanceSales.url="/instore-sales?country=".concat(c,"&lang=").concat(d)},ra=/*#__PURE__*/function(){var a=k(/*#__PURE__*/i().mark(function b(a){var c,d,e;return i().wrap(function f(b){for(;1;)switch(b.prev=b.next){case 0:return c=!1,b.prev=1,b.next=4,fetch("".concat(a,"?key=").concat(new Date().getTime()));case 4:return d=b.sent,b.next=7,d.json();case 7:e=b.sent,!0===e&&(qa(),c=!0),b.next=14;break;case 11:b.prev=11,b.t0=b["catch"](1),console.log("Error ",b.t0);case 14:return b.abrupt("return",c);case 15:case"end":return b.stop();}},b,null,[[1,11]])}));return function SSAGetArctivation(b){return a.apply(this,arguments)}}();a.SSAGetArctivation=ra;var sa=/*#__PURE__*/function(){var a=k(/*#__PURE__*/i().mark(function b(a){var c,e;return i().wrap(function f(b){for(;1;)switch(b.prev=b.next){case 0:return c={email:M("get").asmID,CSRFToken:M("get").CSRFToken},e="".concat(a,"?key=").concat(new Date().getTime()),b.abrupt("return",(0,d.simpleAjax)({data:c,url:e,method:"POST"}).then(function(a){var b=JSON.parse(a);return b}));case 3:case"end":return b.stop();}},b)}));return function getStoresList(b){return a.apply(this,arguments)}}();a.getStoresList=sa;var ta=/*#__PURE__*/function(){var a=k(/*#__PURE__*/i().mark(function a(){var b,d,e,f;return i().wrap(function g(a){for(;1;)switch(a.prev=a.next){case 0:if(b=document.querySelector("#ssa-checkout-menu"),!b){a.next=14;break}return a.next=4,ra(t);case 4:H.distanceSales.show=a.sent,H.asmName=b.dataset.user,n=document.querySelector("#ssa-checkout-link-template"),d=n.innerHTML,e=c.compile(d),H.isDesktop=!0,f=e(H),b.innerHTML=f,za(),S();case 14:case"end":return a.stop();}},a)}));return function CheckoutLinkMenu(){return a.apply(this,arguments)}}(),ua=z&&M("get").silentLogout,va=function SSALinkMenu(a){H.asmName=a,n=document.querySelector("#ssa-link-template");var b=n.innerHTML,d=c.compile(b);H.silentLogout=ua,H.isDesktop=!0;var e=d(H);H.isDesktop=!1;var f=d(H);document.querySelector(".header-ssa-to-display").innerHTML=e;var g=document.querySelector(".header-ssa-display-mobile"),h=document.createElement("div");g.classList.add("ssa-available"),h.innerHTML=f,na(h,g),w.classList.add("ssa-available"),ma("startSession"),za(),S()};a.SSALinkMenu=va;var wa=function SelectStoreAtFirst(){var a=document.getElementById("ssa-change-store"),b=document.getElementById("js-ssa-stores-list").value;b&&""!==b?(a.removeAttribute("class"),a.submit()):a.setAttribute("class","_error")};a.SelectStoreAtFirst=wa;var xa=function bindPanel(){var a=document.getElementById("js-ssa-select-store-first"),b=document.getElementsByClassName("js-ssa-logout");a&&a.addEventListener("click",function(){wa()}),b&&Array.from(b).forEach(function(a){a.addEventListener("click",function(a){a.preventDefault(),document.getElementsByClassName("ssa-menu")[0].classList.add("_loading");var b=M("get").eaau?"eaau":"no_eaau",c=M("get").osauser?"osa":"ssa";ma("logout","".concat(c,"-").concat(b)),W()})})},ya=/*#__PURE__*/function(){var a=k(/*#__PURE__*/i().mark(function b(a){var d,e,f,g;return i().wrap(function h(b){for(;1;)switch(b.prev=b.next){case 0:return b.next=2,sa(u);case 2:return d=b.sent,b.next=5,ra(t);case 5:H.distanceSales.show=b.sent,H.stores=d.stores,H.currentStore=d.currentStore,H.isOverlayBlocked=B,H.logoutUrl=M("get").logoutUrl,H.CSRFToken=M("get").CSRFToken,H.showStores=1<H.stores.length,H.noStore=0===H.stores.length,m="mobile"===a?document.getElementById("ssa-mobile-content"):document.querySelector("#js-ssa-overlay"),n=document.querySelector("#ssa-menu-template"),e=n.innerHTML,f=c.compile(e),m.innerHTML=f(H),g=1<H.stores.length?"multiple":"single",ma("openOverlay",g),xa();case 21:case"end":return b.stop();}},b)}));return function SSAPanel(b){return a.apply(this,arguments)}}();a.bindChangeStore=function bindChangeStore(a){var b=document.getElementById("ssa-change-store");B?b.removeAttribute("class"):(document.getElementById("sales-assistant-stores").value=a,document.getElementsByClassName("ssa-menu")[0].classList.add("_loading"),ma("changeStore","toStoreId_".concat(a)),b.submit())};var za=function bindSSA(){var a=document.getElementsByClassName("js-ssa-menu"),b=document.getElementById("ssa-mm-menu-link");a&&Array.from(a).forEach(function(a){a.addEventListener("click",function(){ua?W():(pa(),ya())})}),b&&b.addEventListener("click",function(){ua?W():ya("mobile")})},Aa=function showAgentUser(){return(0,d.waitForCSRF)(function(){return fetch("".concat(o,"?key=").concat(new Date().getTime()))}).then(function(a){return a.json()}).then(function(a){a?(C=a,C.timeStamp="".concat(new Date().getTime()),C.CSRFToken=window.hybris.CSRFToken,C.logoutUrl=!0===a.eaau?s:r,M("update"),y?ta():a.osauser?(M("get")?(C.isPanelOpen=M("get").isPanelOpen,C.isClickOnStopsession=M("get").isClickOnStopsession):(C.isPanelOpen=!0,C.isClickOnStopsession=!1),U(C.isPanelOpen),ka(),oa()):(va(a.asmName),z&&(0,f.silentCALogout)(),B&&(ya(),za()))):M("remove")}).catch(function(){M("remove")})};document.addEventListener("userLogIn",function(){G=L(K)?L(K).klientid:null});a.load=function load(){Aa()}});
//# sourceMappingURL=asm-dashboard.js.map
