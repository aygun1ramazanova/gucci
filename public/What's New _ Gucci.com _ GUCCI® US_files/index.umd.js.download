!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e||self).analyticsSdk={})}(this,function(e){var n=function(e){var n=e.country,t=e.currency,o=e.exchangeRate;this.country=void 0,this.currency=void 0,this.exchangeRate=void 0,this.country=n,this.currency=t,this.exchangeRate=o},t=/*#__PURE__*/function(){function e(){}var n=e.prototype;return n.getViewItemProduct=function(e){var n,t=null==(n=window.dataLayer)?void 0:n.flatMap(function(e){return"view_item"===(null==e?void 0:e.event)?e.items:[]});return e?null==t?void 0:t.find(function(n){return n.item_id==e}):null==t?void 0:t[0]},n.getViewItemListProduct=function(e){var n,t=null==(n=window.dataLayer)?void 0:n.flatMap(function(e){return"view_item_list"===(null==e?void 0:e.event)?e.items:[]});return e?null==t?void 0:t.find(function(n){return n.item_id==e}):null==t?void 0:t[0]},n.getDeliveryMethod=function(){var e,n;return null==(e=window.dataLayer)||null==(n=e.reverse().find(function(e){return e.main_shipping_option}))?void 0:n.main_shipping_option},n.push=function(e){var n;null==(n=window.dataLayer)||n.push(e)},e}();function o(e){throw new Error(e)}t.dataLayer=new t;var r="genericEvent",i=/*#__PURE__*/function(){function e(e,n,t,o,r,i){this.event=void 0,this.category=void 0,this.action=void 0,this.label=void 0,this.country=void 0,this.genericEventData=void 0,this.event=e,this.category=n,this.action=t,this.label=o,this.country=r,this.genericEventData=i}return e.prototype.clearEventData=function(){return{genericEventData:void 0}},e}();function u(e,n,t){return{name:"simpleTrackEvent",event:{category:e,action:n,label:t}}}function a(e,n,t){var i,u,a,c=n.event;c||o("Error: event not found");var s={event:r,category:null!=(i=c.category)?i:o("Error: category in genericEvent is null or undefined"),action:null!=(u=c.action)?u:o("Error: action in genericEvent is null or undefined"),label:null!=(a=c.label)?a:"",country:t.country};e.push(s)}var c=/*#__PURE__*/function(){function e(e){this.dataLayer=void 0,this.dataLayer=e}return e.prototype.push=function(e){this.dataLayer.push(e),e instanceof i&&this.dataLayer.push(e.clearEventData())},e}(),s={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},l=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];Object.prototype.hasOwnProperty.call(s,e)||(e=s.log),l[e].apply(l,n)};l.debug=console.debug.bind(console),l.log=console.log.bind(console),l.info=console.info.bind(console),l.warn=console.warn.bind(console),l.error=console.error.bind(console);var f,d,v,p,y,g=function(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))},m=!1;function h(e){m=e}function b(e,n,t){var o=t.value;t.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=f?w(o):o;return t.apply(this,e)}}function w(e){return function(){return k(e,this,arguments)}}function k(e,n,t){try{return e.apply(n,t)}catch(e){if(_(s.error,e),f)try{f(e)}catch(e){_(s.error,e)}}}function _(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];m&&l.apply(void 0,g([e,"[MONITOR]"],n,!1))}function C(e,n,t){var o,r,i=!t||void 0===t.leading||t.leading,u=!t||void 0===t.trailing||t.trailing,a=!1;return{throttled:function(){for(var t=[],c=0;c<arguments.length;c++)t[c]=arguments[c];a?o=t:(i?e.apply(void 0,t):o=t,a=!0,r=setTimeout(function(){u&&o&&e.apply(void 0,o),a=!1,o=void 0},n))},cancel:function(){clearTimeout(r),a=!1,o=void 0}}}function S(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.forEach(function(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}),e}function x(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,x)}function E(e){return 0!==e&&100*Math.random()<=e}function T(){}function L(e,n,t){if("object"!=typeof e||null===e)return JSON.stringify(e);var o=A(Object.prototype),r=A(Array.prototype),i=A(Object.getPrototypeOf(e)),u=A(e);try{return JSON.stringify(e,n,t)}catch(e){return"<error: unable to serialize object>"}finally{o(),r(),i(),u()}}function A(e){var n=e,t=n.toJSON;return t?(delete n.toJSON,function(){n.toJSON=t}):T}function O(e,n){return-1!==e.indexOf(n)}function R(e){if(Array.from)return Array.from(e);var n=[];if(e instanceof Set)e.forEach(function(e){return n.push(e)});else for(var t=0;t<e.length;t++)n.push(e[t]);return n}function I(e){return function(e){return"number"==typeof e}(e)&&e>=0&&e<=100}function P(e){return Object.keys(e).map(function(n){return e[n]})}function M(e){return 0===Object.keys(e).length}function B(e,n){return e.slice(0,n.length)===n}function D(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function N(e,n,t){void 0===t&&(t="");var o=e.charCodeAt(n-1),r=o>=55296&&o<=56319?n+1:n;return e.length<=r?e:"".concat(e.slice(0,r)).concat(t)}function q(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function F(e,n,t){if(void 0===t&&(t=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(n){var t=e.has(n);return t||e.add(n),t}}}var n=[];return{hasAlreadyBeenSeen:function(e){var t=n.indexOf(e)>=0;return t||n.push(e),t}}}()),void 0===n)return e;if("object"!=typeof n||null===n)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){var o=n.flags||[n.global?"g":"",n.ignoreCase?"i":"",n.multiline?"m":"",n.sticky?"y":"",n.unicode?"u":""].join("");return new RegExp(n.source,o)}if(!t.hasAlreadyBeenSeen(n)){if(Array.isArray(n)){for(var r=Array.isArray(e)?e:[],i=0;i<n.length;++i)r[i]=F(r[i],n[i],t);return r}var u="object"===q(e)?e:{};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(u[a]=F(u[a],n[a],t));return u}}function U(e){return F(void 0,e)}function j(){for(var e,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var o=0,r=n;o<r.length;o++){var i=r[o];null!=i&&(e=F(e,i))}return e}function z(e,n,t,o){var r=new Date;r.setTime(r.getTime()+t);var i="expires=".concat(r.toUTCString()),u=o&&o.crossSite?"none":"strict",a=o&&o.domain?";domain=".concat(o.domain):"",c=o&&o.secure?";secure":"";document.cookie="".concat(e,"=").concat(n,";").concat(i,";path=/;samesite=").concat(u).concat(a).concat(c)}function G(e){return function(e,n){var t=new RegExp("(?:^|;)\\s*".concat(n,"\\s*=\\s*([^;]+)")).exec(e);return t?t[1]:void 0}(document.cookie,e)}function H(e,n){z(e,"",0,n)}function V(e,n){return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];try{return e.apply(void 0,t)}catch(e){l.error(n,e)}}}function J(){return(new Date).getTime()}function Z(){return J()}function W(){return performance.now()}function $(){return{relative:W(),timeStamp:Z()}}function X(){return void 0===p&&(p=performance.timing.navigationStart),p}function K(e){return function(e,n){if(function(){if(void 0!==y)return y;try{var e=new URL("http://test/path");return y="http://test/path"===e.href}catch(e){y=!1}return y}())return void 0!==n?new URL(e,n):new URL(e);if(void 0===n&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var t=document,o=t.createElement("a");if(void 0!==n){var r=(t=document.implementation.createHTMLDocument("")).createElement("base");r.href=n,t.head.appendChild(r),t.body.appendChild(o)}return o.href=e,o}(e,function(e){if(e.origin)return e.origin;var n=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(n)}(window.location)).href}var Y="datadoghq.com",Q={logs:"logs",rum:"rum",sessionReplay:"session-replay"},ee={logs:"logs",rum:"rum",sessionReplay:"replay"};function ne(e,n,t){var o=e.clientToken,r=function(e,n){var t=e.site,o=void 0===t?Y:t,r=e.internalAnalyticsSubdomain;if(r&&o===Y)return"".concat(r,".").concat(Y);var i=o.split("."),u=i.pop();return"".concat(Q[n],".browser-intake-").concat(i.join("-"),".").concat(u)}(e,n),i="https://".concat(r,"/api/v2/").concat(ee[n]),u=e.proxyUrl&&K(e.proxyUrl);return{build:function(r,a){var c=["sdk_version:".concat("4.30.0"),"api:".concat(r)].concat(t);a&&c.push("retry_count:".concat(a.count),"retry_after:".concat(a.lastFailureStatus));var s=["ddsource=browser","ddtags=".concat(encodeURIComponent(c.join(","))),"dd-api-key=".concat(o),"dd-evp-origin-version=".concat(encodeURIComponent("4.30.0")),"dd-evp-origin=browser","dd-request-id=".concat(x())];"rum"===n&&s.push("batch_time=".concat(Z())),e.internalAnalyticsSubdomain&&s.reverse();var l="".concat(i,"?").concat(s.join("&"));return u?"".concat(u,"?ddforward=").concat(encodeURIComponent(l)):l},buildIntakeUrl:function(){return u?"".concat(u,"?ddforward"):i},endpointType:n}}var te=/[^a-z0-9_:./-]/;function oe(e,n){(n.length>200-e.length-1||te.test(n))&&l.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var t=n.replace(/,/g,"_");return"".concat(e,":").concat(t)}function re(e){var n={};return n.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),n.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(n.domain=function(){if(void 0===d){for(var e="dd_site_test_".concat(x()),n=window.location.hostname.split("."),t=n.pop();n.length&&!G(e);)z(e,"test",1e3,{domain:t="".concat(n.pop(),".").concat(t)});H(e,{domain:t}),d=t}return d}()),n}var ie="?";function ue(e){var n=[],t=ye(e,"stack"),o=String(e);return t&&B(t,o)&&(t=t.slice(o.length)),t&&t.split("\n").forEach(function(e){var t=function(e){var n=se.exec(e);if(n){var t=n[2]&&0===n[2].indexOf("native"),o=n[2]&&0===n[2].indexOf("eval"),r=le.exec(n[2]);return o&&r&&(n[2]=r[1],n[3]=r[2],n[4]=r[3]),{args:t?[n[2]]:[],column:n[4]?+n[4]:void 0,func:n[1]||ie,line:n[3]?+n[3]:void 0,url:t?void 0:n[2]}}}(e)||function(e){var n=fe.exec(e);if(n)return{args:[],column:n[3]?+n[3]:void 0,func:ie,line:n[2]?+n[2]:void 0,url:n[1]}}(e)||function(e){var n=de.exec(e);if(n)return{args:[],column:n[4]?+n[4]:void 0,func:n[1]||ie,line:+n[3],url:n[2]}}(e)||function(e){var n=ve.exec(e);if(n){var t=n[3]&&n[3].indexOf(" > eval")>-1,o=pe.exec(n[3]);return t&&o&&(n[3]=o[1],n[4]=o[2],n[5]=void 0),{args:n[2]?n[2].split(","):[],column:n[5]?+n[5]:void 0,func:n[1]||ie,line:n[4]?+n[4]:void 0,url:n[3]}}}(e);t&&(!t.func&&t.line&&(t.func=ie),n.push(t))}),{message:ye(e,"message"),name:ye(e,"name"),stack:n}}var ae="((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\w+\\.|\\/).*?)",ce="(?::(\\d+))",se=new RegExp("^\\s*at (.*?) ?\\(".concat(ae).concat(ce,"?").concat(ce,"?\\)?\\s*$"),"i"),le=new RegExp("\\((\\S*)".concat(ce).concat(ce,"\\)")),fe=new RegExp("^\\s*at ?".concat(ae).concat(ce,"?").concat(ce,"??\\s*$"),"i"),de=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,ve=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,pe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function ye(e,n){if("object"==typeof e&&e&&n in e){var t=e[n];return"string"==typeof t?t:void 0}}function ge(e,n,t){var o=e[n],r=t(o),i=function(){if("function"==typeof r)return r.apply(this,arguments)};return e[n]=i,{stop:function(){e[n]===i?e[n]=o:r=o}}}function me(e,n,t){var o=t.before,r=t.after;return ge(e,n,function(e){return function(){var n,t=arguments;return o&&k(o,this,t),"function"==typeof e&&(n=e.apply(this,t)),r&&k(r,this,t),n}})}var he=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/,be="agent",we="console",ke="logger",_e="network",Ce="source",Se="report";function xe(e){var n=Ee(e);return e.stack.forEach(function(e){var t="?"===e.func?"<anonymous>":e.func,o=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",r=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";n+="\n  at ".concat(t).concat(o," @ ").concat(e.url).concat(r).concat(i)}),n}function Ee(e){return"".concat(e.name||"Error",": ").concat(e.message)}function Te(){var e,n=new Error;if(!n.stack)try{throw n}catch(e){}return k(function(){var t=ue(n);t.stack=t.stack.slice(2),e=xe(t)}),e}function Le(e,n){for(var t=e,o=[];(null==t?void 0:t.cause)instanceof Error&&o.length<10;){var r=ue(t.cause);o.push({message:t.cause.message,source:n,type:null==r?void 0:r.name,stack:r&&xe(r)}),t=t.cause}return o.length?o:void 0}var Ae=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var n=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){n.observers=n.observers.filter(function(n){return e!==n}),!n.observers.length&&n.onLastUnsubscribe&&n.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach(function(n){return n(e)})},e}();function Oe(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=new Ae(function(){var n=e.map(function(e){return e.subscribe(function(e){return t.notify(e)})});return function(){return n.forEach(function(e){return e.unsubscribe()})}});return t}function Re(e,n){var t,o=window;return o.Zone&&"function"==typeof o.Zone.__symbol__&&(t=e[o.Zone.__symbol__(n)]),t||(t=e[n]),t}function Ie(e,n){var t=window.__ddBrowserSdkExtensionCallback;t&&t({type:e,payload:n})}var Pe,Me=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],Be=["ddog-gov.com"],De={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function Ne(e,n){_(s.debug,e,n),Fe(S({type:"log",message:e,status:"debug"},n))}function qe(e){Fe(S({type:"log",status:"error"},function(e){if(e instanceof Error){var n=ue(e);return{error:{kind:n.name,stack:xe(Ue(n))},message:n.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(L(e))}}(e)))}function Fe(e){Pe&&De.sentEventCount<De.maxEventsPerPage&&(De.sentEventCount+=1,Pe(e))}function Ue(e){return e.stack=e.stack.filter(function(e){return!e.url||Me.some(function(n){return B(e.url,n)})}),e}function je(e,n,t,o){return ze(e,[n],t,o)}function ze(e,n,t,o){var r=void 0===o?{}:o,i=r.once,u=r.capture,a=r.passive,c=w(function(e){i&&f(),function(e){var n=e.type;e.isTrusted||window.jasmine||Ge.has(n)||(Ge.add(n),Ne("Untrusted event",{event_type:n}))}(e),t(e)}),s=a?{capture:u,passive:a}:u,l=Re(e,"addEventListener");function f(){var t=Re(e,"removeEventListener");n.forEach(function(n){return t.call(e,n,c,s)})}return n.forEach(function(n){return l.call(e,n,c,s)}),{stop:f}}var Ge=new Set,He={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Ve(e,n,t,o,r){return t&&xe({name:e,message:n,stack:[{func:"?",url:t,line:o,column:r}]})}var Je,Ze=Infinity,We=function(){function e(e){var n=this;this.expireDelay=e,this.entries=[],this.clearOldContextsInterval=setInterval(function(){return n.clearOldContexts()},6e4)}return e.prototype.add=function(e,n){var t=this,o={context:e,startTime:n,endTime:Ze,remove:function(){var e=t.entries.indexOf(o);e>=0&&t.entries.splice(e,1)},close:function(e){o.endTime=e}};return this.entries.unshift(o),o},e.prototype.find=function(e){void 0===e&&(e=Ze);for(var n=0,t=this.entries;n<t.length;n++){var o=t[n];if(o.startTime<=e){if(e<=o.endTime)return o.context;break}}},e.prototype.closeActive=function(e){var n=this.entries[0];n&&n.endTime===Ze&&n.close(e)},e.prototype.findAll=function(e){return void 0===e&&(e=Ze),this.entries.filter(function(n){return n.startTime<=e&&e<=n.endTime}).map(function(e){return e.context})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},e.prototype.clearOldContexts=function(){for(var e=W()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}(),$e=9e5,Xe=/^([a-z]+)=([a-z0-9-]+)$/,Ke="_dd_s",Ye=[];function Qe(e,n){var t;if(void 0===n&&(n=0),Je||(Je=e),e===Je)if(n>=100)tn();else{var o,r=un();if(en()){if(r.lock)return void nn(e,n);if(o=x(),r.lock=o,rn(r,e.options),(r=un()).lock!==o)return void nn(e,n)}var i=e.process(r);if(en()&&(r=un()).lock!==o)nn(e,n);else{if(i&&on(i,e.options),en()&&(!i||!an(i))){if((r=un()).lock!==o)return void nn(e,n);delete r.lock,rn(r,e.options),i=r}null===(t=e.after)||void 0===t||t.call(e,i||r),tn()}}else Ye.push(e)}function en(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}function nn(e,n){setTimeout(w(function(){Qe(e,n+1)}),10)}function tn(){Je=void 0;var e=Ye.shift();e&&Qe(e)}function on(e,n){an(e)?function(e){z(Ke,"",0,e)}(n):(e.expire=String(J()+$e),rn(e,n))}function rn(e,n){z(Ke,function(e){return(n=e,Object.keys(n).map(function(e){return[e,n[e]]})).map(function(e){var n=e[1];return"".concat(e[0],"=").concat(n)}).join("&");var n}(e),$e,n)}function un(){var e=G(Ke),n={};return function(e){return void 0!==e&&(-1!==e.indexOf("&")||Xe.test(e))}(e)&&e.split("&").forEach(function(e){var t=Xe.exec(e);null!==t&&(n[t[1]]=t[2])}),n}function an(e){return M(e)}function cn(e,n,t,o,r){0===n.transportStatus&&0===n.queuedPayloads.size()&&n.bandwidthMonitor.canHandle(e)?ln(e,n,t,{onSuccess:function(){return fn(0,n,t,o,r)},onFailure:function(){n.queuedPayloads.enqueue(e),sn(n,t,o,r)}}):n.queuedPayloads.enqueue(e)}function sn(e,n,t,o){2===e.transportStatus&&setTimeout(w(function(){ln(e.queuedPayloads.first(),e,n,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=1e3,fn(1,e,n,t,o)},onFailure:function(){e.currentBackoffTime=Math.min(6e4,2*e.currentBackoffTime),sn(e,n,t,o)}})}),e.currentBackoffTime)}function ln(e,n,t,o){var r=o.onSuccess,i=o.onFailure;n.bandwidthMonitor.add(e),t(e,function(t){n.bandwidthMonitor.remove(e),function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||e.status>=500)}(t)?(n.transportStatus=n.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:t.status},i()):(n.transportStatus=0,r())})}function fn(e,n,t,o,r){0===e&&n.queuedPayloads.isFull()&&!n.queueFullReported&&(r({message:"Reached max ".concat(o," events size queued for upload: ").concat(3,"MiB"),source:be,startClocks:$()}),n.queueFullReported=!0);var i=n.queuedPayloads;for(n.queuedPayloads=dn();i.size()>0;)cn(i.dequeue(),n,t,o,r)}function dn(){var e=[];return{bytesCount:0,enqueue:function(n){this.isFull()||(e.push(n),this.bytesCount+=n.bytesCount)},first:function(){return e[0]},dequeue:function(){var n=e.shift();return n&&(this.bytesCount-=n.bytesCount),n},size:function(){return e.length},isFull:function(){return this.bytesCount>=3145728}}}var vn=!1;function pn(e,n,t){var o=new XMLHttpRequest,r=w(function(){o.removeEventListener("loadend",r),null==t||t({status:o.status})});o.open("POST",e,!0),o.addEventListener("loadend",r),o.send(n)}var yn,gn=/[^\u0000-\u007F]/,mn=function(){function e(e,n,t,o,r,i){var u=this;this.request=e,this.batchMessagesLimit=n,this.batchBytesLimit=t,this.messageBytesLimit=o,this.flushTimeout=r,this.pageExitObservable=i,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,i.subscribe(function(){return u.flush(u.request.sendOnExit)}),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,n){this.addOrUpdate(e,n)},e.prototype.flush=function(e){if(void 0===e&&(e=this.request.send),0!==this.bufferMessagesCount){var n=this.pushOnlyBuffer.concat(P(this.upsertBuffer)),t=this.bufferBytesCount;this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,e({data:n.join("\n"),bytesCount:t})}},e.prototype.computeBytesCount=function(e){return gn.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,n){var t=this.process(e),o=t.processedMessage,r=t.messageBytesCount;r>=this.messageBytesLimit?l.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(n)&&this.remove(n),this.willReachedBytesLimitWith(r)&&this.flush(),this.push(o,r,n),this.isFull()&&this.flush())},e.prototype.process=function(e){var n=L(e);return{processedMessage:n,messageBytesCount:this.computeBytesCount(n)}},e.prototype.push=function(e,n,t){this.bufferMessagesCount>0&&(this.bufferBytesCount+=1),void 0!==t?this.upsertBuffer[t]=e:this.pushOnlyBuffer.push(e),this.bufferBytesCount+=n,this.bufferMessagesCount+=1},e.prototype.remove=function(e){var n=this.upsertBuffer[e];delete this.upsertBuffer[e];var t=this.computeBytesCount(n);this.bufferBytesCount-=t,this.bufferMessagesCount-=1,this.bufferMessagesCount>0&&(this.bufferBytesCount-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesCount+e+1>=this.batchBytesLimit},e.prototype.isFull=function(){return this.bufferMessagesCount===this.batchMessagesLimit||this.bufferBytesCount>=this.batchBytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout(w(function(){e.flush(),e.flushPeriodically()}),this.flushTimeout)},e}();function hn(){var e=D().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(n,t){e.send(JSON.stringify({eventType:n,event:t}))}}}function bn(e){var n;void 0===e&&(e=null===(n=D().location)||void 0===n?void 0:n.hostname);var t=hn();return!!t&&t.getAllowedWebViewHosts().some(function(n){return e===n||(t=e,o=".".concat(n),t.slice(-o.length)===o);var t,o})}function wn(e,n,t,o,r){var i,u=a(n);function a(n){return new mn(function(e,n,t){var o={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:dn(),queueFullReported:!1},r=function(t,o){return function(e,n,t,o){var r=t.data,i=t.bytesCount,u=t.retry;if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&i<n){var a=e.build("fetch",u);fetch(a,{method:"POST",body:r,keepalive:!0,mode:"cors"}).then(w(function(e){return null==o?void 0:o({status:e.status,type:e.type})}),w(function(){pn(e.build("xhr",u),r,o)}))}else pn(e.build("xhr",u),r,o)}(e,n,t,o)};return{send:function(n){cn(n,o,r,e.endpointType,t)},sendOnExit:function(t){!function(e,n,t){var o=t.data;if(navigator.sendBeacon&&t.bytesCount<n)try{var r=e.build("beacon");if(navigator.sendBeacon(r,o))return}catch(e){!function(e){vn||(vn=!0,qe(e))}(e)}pn(e.build("xhr"),o)}(e,n,t)}}}(n,e.batchBytesLimit,t),e.batchMessagesLimit,e.batchBytesLimit,e.messageBytesLimit,e.flushTimeout,o)}return r&&(i=a(r)),{add:function(e,n){void 0===n&&(n=!0),u.add(e),i&&n&&i.add(e)}}}var kn,_n=new WeakMap;function Cn(){var e;return yn||(e=new Ae(function(){var n=me(XMLHttpRequest.prototype,"open",{before:Sn}).stop,t=me(XMLHttpRequest.prototype,"send",{before:function(){xn.call(this,e)}}).stop,o=me(XMLHttpRequest.prototype,"abort",{before:En}).stop;return function(){n(),t(),o()}}),yn=e),yn}function Sn(e,n){_n.set(this,{state:"open",method:e,url:K(String(n))})}function xn(e){var n=this,t=_n.get(this);if(t){var o=t;o.state="start",o.startTime=W(),o.startClocks=$(),o.isAborted=!1,o.xhr=this;var r=!1,i=me(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&u()}}).stop,u=w(function(){if(n.removeEventListener("loadend",u),i(),!r){r=!0;var a,c=t;c.state="complete",c.duration=(a=o.startClocks.timeStamp,Z()-a),c.status=n.status,e.notify(S({},c))}});this.addEventListener("loadend",u),e.notify(o)}}function En(){var e=_n.get(this);e&&(e.isAborted=!0)}function Tn(e,n,t){var o=t&&t.method||"object"==typeof n&&n.method||"GET",r=K("object"==typeof n&&n.url||n),i={state:"start",init:t,input:n,method:o,startClocks:$(),url:r};return e.notify(i),i}function Ln(e,n,t){var o=function(n){var o=t;o.state="resolve","stack"in n||n instanceof Error?(o.status=0,o.isAborted=n instanceof DOMException&&n.code===DOMException.ABORT_ERR,o.error=n):"status"in n&&(o.response=n,o.responseType=n.type,o.status=n.status,o.isAborted=!1),e.notify(o)};n.then(w(o),w(o))}var An={};function On(e,n,t){var o,r=e.map(function(e){return function(e){return"string"==typeof e?e:e instanceof Error?Ee(ue(e)):L(e,void 0,2)}(e)}).join(" ");if(n===s.error){var i=function(e,n){for(var t=0;t<e.length;t+=1){var o=e[t];if(o instanceof Error)return o}}(e);o=i?xe(ue(i)):void 0,r="console error: ".concat(r)}return{api:n,message:r,stack:o,handlingStack:t}}var Rn=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach(function(e){return e()}),this.buffer.length=0},e}();function In(){var e={};return{get:function(){return e},add:function(n,t){e[n]=t},remove:function(n){delete e[n]},set:function(n){e=n},getContext:function(){return U(e)},setContext:function(n){e=U(n)},setContextProperty:function(n,t){e[n]=U(t)},removeContextProperty:function(n){delete e[n]},clearContext:function(){e={}}}}function Pn(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||G("datadog-synthetics-injects-rum"))}function Mn(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||G("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}function Bn(e){var n=S({},e);return["id","name","email"].forEach(function(e){e in n&&(n[e]=String(n[e]))}),n}function Dn(e,n,t){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every(function(e){return O(n,e)})?"all"===e?n:(o=e,r=new Set,o.forEach(function(e){return r.add(e)}),R(r)):void l.error("".concat(t,' should be "all" or an array with allowed values "').concat(n.join('", "'),'"'));var o,r}var Nn,qn={debug:"debug",error:"error",info:"info",warn:"warn"},Fn="http",Un=Object.keys(qn),jn=function(){function e(e,n,t,o,r){void 0===t&&(t=Fn),void 0===o&&(o=qn.debug),void 0===r&&(r={}),this.handleLogStrategy=e,this.handlerType=t,this.level=o,this.contextManager=In(),this.contextManager.set(S({},r,n?{logger:{name:n}}:void 0))}return e.prototype.log=function(e,n,t){void 0===t&&(t=qn.info),this.handleLogStrategy({message:e,context:U(n),status:t},this)},e.prototype.debug=function(e,n){this.log(e,n,qn.debug)},e.prototype.info=function(e,n){this.log(e,n,qn.info)},e.prototype.warn=function(e,n){this.log(e,n,qn.warn)},e.prototype.error=function(e,n){this.log(e,j({error:{origin:ke}},n),qn.error)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,n){this.contextManager.add(e,n)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},function(e,n,t,o){var r,i=arguments.length,u=i<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,n,t,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(u=(i<3?r(u):i>3?r(n,t,u):r(n,t))||u);i>3&&u&&Object.defineProperty(n,t,u)}([b],e.prototype,"log",null),e}();function zn(e){return E(e.sessionSampleRate)?"1":"0"}var Gn=((Nn={})[qn.debug]=0,Nn[qn.info]=1,Nn[qn.warn]=2,Nn[qn.error]=3,Nn);function Hn(e,n,t){var o=t.getHandler(),r=Array.isArray(o)?o:[o];return Gn[e]>=Gn[t.getLevel()]&&O(r,n)}var Vn,Jn=!1;function Zn(e){var n,t=window;if(Pn()){var o=r(t.DD_RUM_SYNTHETICS);return o||Jn||(Jn=!0,Ne("Logs sent before RUM is injected by the synthetics worker",{testId:(n=window._DATADOG_SYNTHETICS_PUBLIC_ID||G("datadog-synthetics-public-id"),"string"==typeof n?n:void 0),resultId:Mn()})),o}return r(t.DD_RUM);function r(n){if(n&&n.getInternalContext)return n.getInternalContext(e)}}var Wn,$n=((Vn={})[s.log]=qn.info,Vn[s.debug]=qn.debug,Vn[s.info]=qn.info,Vn[s.warn]=qn.warn,Vn[s.error]=qn.error,Vn),Xn=((Wn={})[He.cspViolation]=qn.error,Wn[He.intervention]=qn.error,Wn[He.deprecation]=qn.warn,Wn);function Kn(e,n){return e.length>n.requestErrorResponseLengthLimit?"".concat(e.substring(0,n.requestErrorResponseLengthLimit),"..."):e}function Yn(e){return"xhr"===e?"XHR":"Fetch"}var Qn,et,nt=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,n){var t=this.callbacks[e];t&&t.forEach(function(e){return e(n)})},e.prototype.subscribe=function(e,n){var t=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),{unsubscribe:function(){t.callbacks[e]=t.callbacks[e].filter(function(e){return n!==e})}}},e}(),tt=function(e){var n,t,o=!1,r=In(),i=In(),u={},a=function(){},c=new Rn,d=function(e,n,t,o){void 0===t&&(t=U(g())),void 0===o&&(o=Z()),c.add(function(){return d(e,n,t,o)})},p=function(){},y=new jn(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return d.apply(void 0,e)});function g(){return{view:{referrer:document.referrer,url:window.location.href},context:r.getContext(),user:i.getContext()}}return n={logger:y,init:w(function(e){var n;if(bn()&&(e=function(e){return S({},e,{clientToken:"empty"})}(e)),function(e){return!o||(e.silentMultipleInit||l.error("DD_LOGS is already initialized."),!1)}(e)){var t=function(e){var n=function(e){var n,t,o;if(e&&e.clientToken){var r=null!==(n=e.sessionSampleRate)&&void 0!==n?n:e.sampleRate;if(void 0===r||I(r))if(void 0===e.telemetrySampleRate||I(e.telemetrySampleRate)){var i;if(void 0===e.telemetryConfigurationSampleRate||I(e.telemetryConfigurationSampleRate))return i=e.enableExperimentalFeatures,Array.isArray(i)&&(v||(v=new Set(i)),i.filter(function(e){return"string"==typeof e}).forEach(function(e){O(e,"-")&&l.warn("please use snake case for '".concat(e,"'")),v.add(e)})),S({beforeSend:e.beforeSend&&V(e.beforeSend,"beforeSend threw an error:"),cookieOptions:re(e),sessionSampleRate:null!=r?r:100,telemetrySampleRate:null!==(t=e.telemetrySampleRate)&&void 0!==t?t:20,telemetryConfigurationSampleRate:null!==(o=e.telemetryConfigurationSampleRate)&&void 0!==o?o:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},function(e){var n=function(e){var n=e.env,t=e.service,o=e.version,r=e.datacenter,i=[];return n&&i.push(oe("env",n)),t&&i.push(oe("service",t)),o&&i.push(oe("version",o)),r&&i.push(oe("datacenter",r)),i}(e),t=function(e,n){return{logsEndpointBuilder:ne(e,"logs",n),rumEndpointBuilder:ne(e,"rum",n),sessionReplayEndpointBuilder:ne(e,"sessionReplay",n)}}(e,n),o=P(t).map(function(e){return e.buildIntakeUrl()}),r=function(e,n,t){if(e.replica){var o=S({},e,{site:Y,clientToken:e.replica.clientToken}),r={logsEndpointBuilder:ne(o,"logs",t),rumEndpointBuilder:ne(o,"rum",t)};return n.push.apply(n,P(r).map(function(e){return e.buildIntakeUrl()})),S({applicationId:e.replica.applicationId},r)}}(e,o,n);return S({isIntakeUrl:function(e){return o.some(function(n){return 0===e.indexOf(n)})},replica:r,site:e.site||Y},t)}(e));l.error("Telemetry Configuration Sample Rate should be a number between 0 and 100")}else l.error("Telemetry Sample Rate should be a number between 0 and 100");else l.error("Session Sample Rate should be a number between 0 and 100")}else l.error("Client Token is not configured, we will not send any data.")}(e),t=Dn(e.forwardConsoleLogs,P(s),"Forward Console Logs"),o=Dn(e.forwardReports,P(He),"Forward Reports");if(n&&t&&o)return e.forwardErrorsToLogs&&!O(t,s.error)&&t.push(s.error),S({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:t,forwardReports:o,requestErrorResponseLengthLimit:32768},n)}(e);t&&(n=function(e,n,t,o){var r=new nt;r.subscribe(1,function(e){return Ie("logs",e)});var i,u=function(e){return r.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:be},origin:be,status:qn.error}})},a=i=new Ae(function(){var e=je(document,"visibilitychange",function(){"hidden"===document.visibilityState&&i.notify({reason:"visibility_hidden"})},{capture:!0}).stop,n=je(window,"beforeunload",function(){i.notify({reason:"before_unload"})}).stop;return function(){e(),n()}}),c=function(e,n,t){var o,r=function(e,n){var t,o=new Ae;return De.telemetryEnabled=E(n.telemetrySampleRate),De.telemetryConfigurationEnabled=De.telemetryEnabled&&E(n.telemetryConfigurationSampleRate),Pe=function(e){if(!O(Be,n.site)&&De.telemetryEnabled){var r=(i=e,j({type:"telemetry",date:Z(),service:"browser-logs-sdk",version:"4.30.0",source:"browser",_dd:{format_version:2},telemetry:i,experimental_features:R(v||new Set)},void 0!==t?t():{}));o.notify(r),Ie("telemetry",r)}var i},f=qe,S(De,{maxEventsPerPage:n.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(e){t=e},observable:o}}(0,e);if(bn()){var i=hn();r.observable.subscribe(function(e){return i.send("internal_telemetry",e)})}else{var u=wn(e,e.rumEndpointBuilder,n,t,null===(o=e.replica)||void 0===o?void 0:o.rumEndpointBuilder);r.observable.subscribe(function(n){return u.add(n,function(e){return"datad0g.com"===e.site}(e))})}return r}(n,u,a);c.setContextProvider(function(){var e,n,t,o,r,i;return{application:{id:null===(e=Zn())||void 0===e?void 0:e.application_id},session:{id:null===(n=y.findTrackedSession())||void 0===n?void 0:n.id},view:{id:null===(o=null===(t=Zn())||void 0===t?void 0:t.view)||void 0===o?void 0:o.id},action:{id:null===(i=null===(r=Zn())||void 0===r?void 0:r.user_action)||void 0===i?void 0:i.id}}}),function(e,n){if(!e.forwardErrorsToLogs)return{stop:T};var t;function o(t,o){function r(e){n.notify(0,{rawLogsEvent:{message:"".concat(Yn(t)," error ").concat(o.method," ").concat(o.url),date:o.startClocks.timeStamp,error:{origin:_e,stack:e||"Failed to load"},http:{method:o.method,status_code:o.status,url:o.url},status:qn.error,origin:_e}})}e.isIntakeUrl(o.url)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(o)&&!function(e){return e.status>=500}(o)||("xhr"in o?function(e,n,t){t("string"==typeof e.response?Kn(e.response,n):e.response)}(o.xhr,e,r):o.response?function(e,n,t){window.TextDecoder?e.body?function(e,n,t){!function(e,n,t){var o=e.getReader(),r=[],i=0;function u(){var e,u;if(o.cancel().catch(T),t.collectStreamBody){var a;if(1===r.length)a=r[0];else{a=new Uint8Array(i);var c=0;r.forEach(function(e){a.set(e,c),c+=e.length})}e=a.slice(0,t.bytesLimit),u=a.length>t.bytesLimit}n(void 0,e,u)}!function e(){o.read().then(w(function(n){n.done?u():(t.collectStreamBody&&r.push(n.value),(i+=n.value.length)>t.bytesLimit?u():e())}),w(function(e){return n(e)}))}()}(e,function(e,n,o){if(e)t(e);else{var r=(new TextDecoder).decode(n);o&&(r+="..."),t(void 0,r)}},{bytesLimit:n,collectStreamBody:!0})}(e.clone().body,n.requestErrorResponseLengthLimit,function(e,n){t(e?"Unable to retrieve response: ".concat(e):n)}):t():e.clone().text().then(w(function(e){return t(Kn(e,n))}),w(function(e){return t("Unable to retrieve response: ".concat(e))}))}(o.response,e,r):o.error&&function(e,n,t){t(Kn(xe(ue(e)),n))}(o.error,e,r))}Cn().subscribe(function(e){"complete"===e.state&&o("xhr",e)}),(kn||(t=new Ae(function(){if(window.fetch)return ge(window,"fetch",function(e){return function(n,o){var r,i=k(Tn,null,[t,n,o]);return i?(r=e.call(this,i.input,i.init),k(Ln,null,[t,r,i])):r=e.call(this,n,o),r}}).stop}),kn=t),kn).subscribe(function(e){"resolve"===e.state&&o("fetch",e)})}(n,r),function(e,n){if(!e.forwardErrorsToLogs)return{stop:T};var t,o,r=new Ae;t=r,o=function(e,n){t.notify(function(e){var n=e.stackTrace,t=e.originalError,o=e.handlingStack,r=e.startClocks,i=e.nonErrorPrefix,u=e.source,a=e.handling;return n&&(void 0!==n.message||t instanceof Error)?{startClocks:r,source:u,handling:a,originalError:t,message:n.message||"Empty message",stack:xe(n),handlingStack:o,type:n.name,causes:Le(t,u)}:{startClocks:r,source:u,handling:a,originalError:t,message:"".concat(i," ").concat(L(t)),stack:"No stack, consider using an instance of Error",handlingStack:o,type:n&&n.name}}({stackTrace:e,originalError:n,startClocks:$(),nonErrorPrefix:"Uncaught",source:Ce,handling:"unhandled"}))},function(e){me(window,"onerror",{before:function(n,t,o,r,i){var u;if(i)u=ue(i),e(u,i);else{var a,c={url:t,column:r,line:o},s=n;if("[object String]"==={}.toString.call(n)){var l=he.exec(s);l&&(a=l[1],s=l[2])}e(u={name:a,message:"string"==typeof s?s:void 0,stack:[c]},n)}}})}(o),function(e){me(window,"onunhandledrejection",{before:function(n){var t=n.reason||"Empty reason",o=ue(t);e(o,t)}})}(o),r.subscribe(function(e){n.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:Ce,stack:e.stack},origin:Ce,status:qn.error}})})}(n,r),function(e,n){var t,o;(t=e.forwardConsoleLogs,o=t.map(function(e){return An[e]||(An[e]=function(e){var n=new Ae(function(){var t=console[e];return console[e]=function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];t.apply(console,o);var i=Te();k(function(){n.notify(On(o,e,i))})},function(){console[e]=t}});return n}(e)),An[e]}),Oe.apply(void 0,o)).subscribe(function(e){n.notify(0,{rawLogsEvent:{date:Z(),message:e.message,origin:we,error:e.api===s.error?{origin:we,stack:e.stack}:void 0,status:$n[e.api]}})})}(n,r),function(e,n){(function(e){var n,t=[];O(e,He.cspViolation)&&t.push(n=new Ae(function(){var e=w(function(e){n.notify(function(e){var n=He.cspViolation,t="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:He.cspViolation,subtype:e.effectiveDirective,message:"".concat(n,": ").concat(t),stack:Ve(e.effectiveDirective,e.originalPolicy?"".concat(t,' of the policy "').concat(N(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}(e))});return je(document,"securitypolicyviolation",e).stop}));var o=e.filter(function(e){return e!==He.cspViolation});return o.length&&t.push(function(e){var n=new Ae(function(){if(window.ReportingObserver){var t=w(function(e){return e.forEach(function(e){n.notify(function(e){var n=e.type,t=e.body;return{type:n,subtype:t.id,message:"".concat(n,": ").concat(t.message),stack:Ve(t.id,t.message,t.sourceFile,t.lineNumber,t.columnNumber)}}(e))})}),o=new window.ReportingObserver(t,{types:e,buffered:!0});return o.observe(),function(){o.disconnect()}}});return n}(o)),Oe.apply(void 0,t)})(e.forwardReports).subscribe(function(e){var t,o=e.message,r=Xn[e.type];r===qn.error?t={kind:e.subtype,origin:Se,stack:e.stack}:e.stack&&(o+=" Found in ".concat(function(e){var n;return null===(n=/@ (.+)/.exec(e))||void 0===n?void 0:n[1]}(e.stack))),n.notify(0,{rawLogsEvent:{date:Z(),message:o,origin:Se,error:t,status:r}})})}(n,r);var d,p=function(e){return{handleLog:function(n,t,o,r){var i=n.context;Hn(n.status,"console",t)&&l(n.status,n.message,j(t.getContext(),i)),e.notify(0,{rawLogsEvent:{date:r||Z(),message:n.message,status:n.status,origin:ke},messageContext:i,savedCommonContext:o,logger:t})}}}(r).handleLog,y=!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var n="dd_cookie_test_".concat(x()),t="test";z(n,t,6e4,e);var o=G(n)===t;return H(n,e),o}catch(e){return l.error(e),!1}}(n.cookieOptions)||bn()||Pn()?function(e){var n="1"===zn(e)?{}:void 0;return{findTrackedSession:function(){return n}}}(n):function(e){var n=function(n,t,o){!function(e){var n=G(Ke),t=G("_dd"),o=G("_dd_r"),r=G("_dd_l");if(!n){var i={};t&&(i.id=t),r&&/^[01]$/.test(r)&&(i.logs=r),o&&/^[012]$/.test(o)&&(i.rum=o),on(i,e)}}(n);var r,i,u=function(n,t,o){var r,i=new Ae,u=new Ae,a=setInterval(w(function(){Qe({options:n,process:function(e){return f(e)?void 0:{}},after:s})}),1e3),c=f(r=un())?r:{};function s(e){return f(e)||(e={}),l()&&(function(e){return c.id!==e.id||c[t]!==e[t]}(e)?(c={},u.notify()):c=e),e}function l(){return void 0!==c[t]}function f(e){return(void 0===e.created||J()-Number(e.created)<144e5)&&(void 0===e.expire||J()<Number(e.expire))}return{expandOrRenewSession:C(w(function(){var o;Qe({options:n,process:function(n){var r=s(n);return o=function(n){var o=function(e,n){var t=function(e){return"0"===e||"1"===e}(n)?n:zn(e);return{trackingType:t,isTracked:"1"===t}}(e,n[t]),r=o.isTracked;return n[t]=o.trackingType,r&&!n.id&&(n.id=x(),n.created=String(J())),r}(r),r},after:function(e){o&&!l()&&function(e){c=e,i.notify()}(e),c=e}})}),1e3).throttled,expandSession:function(){Qe({options:n,process:function(e){return l()?s(e):void 0}})},getSession:function(){return c},renewObservable:i,expireObservable:u,stop:function(){clearInterval(a)}}}(n,t),a=new We(144e5);function c(){return{id:u.getSession().id,trackingType:u.getSession()[t]}}return u.renewObservable.subscribe(function(){a.add(c(),W())}),u.expireObservable.subscribe(function(){a.closeActive(W())}),u.expandOrRenewSession(),a.add(c(),[0,X()][0]),ze(window,["click","touchstart","keydown","scroll"],function(){return u.expandOrRenewSession()},{capture:!0,passive:!0}),r=function(){return u.expandSession()},i=w(function(){"visible"===document.visibilityState&&r()}),je(document,"visibilitychange",i),setInterval(i,6e4),{findActiveSession:function(e){return a.find(e)},renewObservable:u.renewObservable,expireObservable:u.expireObservable}}(e.cookieOptions,"logs");return{findTrackedSession:function(e){var t=n.findActiveSession(e);return t&&"1"===t.trackingType?{id:t.id}:void 0}}}(n);return function(e,n,t,o,r,i){var u=Un.concat(["custom"]),a={};u.forEach(function(e){var t,o,r,u,c;a[e]=(t=e,o=n.eventRateLimiterThreshold,r=i,u=0,c=!1,{isLimitReached:function(){if(0===u&&setTimeout(function(){u=0},6e4),(u+=1)<=o||c)return c=!1,!1;if(u===o+1){c=!0;try{r({message:"Reached max number of ".concat(t,"s by minute: ").concat(o),source:be,startClocks:$()})}finally{c=!1}}return!0}})}),t.subscribe(0,function(i){var u,c,s,l=i.rawLogsEvent,f=i.messageContext,d=void 0===f?void 0:f,v=i.savedCommonContext,p=void 0===v?void 0:v,y=i.logger,g=void 0===y?r:y,m=l.date-X(),h=e.findTrackedSession(m);if(h){var b=p||o(),w=j({service:n.service,session_id:h.id,usr:M(b.user)?void 0:b.user,view:b.view},b.context,Zn(m),l,g.getContext(),d);!Hn(l.status,Fn,g)||!1===(null===(u=n.beforeSend)||void 0===u?void 0:u.call(n,w))||(null===(c=w.error)||void 0===c?void 0:c.origin)!==be&&(null!==(s=a[w.status])&&void 0!==s?s:a.custom).isLimitReached()||t.notify(1,w)}})}(y,n,r,t,o,u),bn()?function(e){var n=hn();e.subscribe(1,function(e){n.send("log",e)})}(r):function(e,n,t,o){var r,i=wn(e,e.logsEndpointBuilder,t,o,null===(r=e.replica)||void 0===r?void 0:r.logsEndpointBuilder);n.subscribe(1,function(e){i.add(e)})}(n,r,u,a),function(e){De.telemetryConfigurationEnabled&&Fe({type:"configuration",configuration:e})}(function(e){var n=function(e){var n;return{session_sample_rate:null!==(n=e.sessionSampleRate)&&void 0!==n?n:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:void 0!==e.proxyUrl?!!e.proxyUrl:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks}}(e);return S({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},n)}(e)),{handleLog:p,getInternalContext:(d=y,{get:function(e){var n=d.findTrackedSession(e);if(n)return{session_id:n.id}}}).get}}(e,t,g,y),d=n.handleLog,a=n.getInternalContext,p=function(){return U(e)},c.drain(),o=!0)}}),getLoggerGlobalContext:w(r.get),getGlobalContext:w(r.getContext),setLoggerGlobalContext:w(r.set),setGlobalContext:w(r.setContext),addLoggerGlobalContext:w(r.add),setGlobalContextProperty:w(r.setContextProperty),removeLoggerGlobalContext:w(r.remove),removeGlobalContextProperty:w(r.removeContextProperty),clearGlobalContext:w(r.clearContext),createLogger:w(function(e,n){return void 0===n&&(n={}),u[e]=new jn(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return d.apply(void 0,e)},e,n.handler,n.level,n.context),u[e]}),getLogger:w(function(e){return u[e]}),getInitConfiguration:w(function(){return p()}),getInternalContext:w(function(e){return a(e)}),setUser:w(function(e){(function(e){var n="object"===q(e);return n||l.error("Unsupported user:",e),n})(e)&&i.setContext(Bn(e))}),getUser:w(i.getContext),setUserProperty:w(function(e,n){var t,o=Bn((t={},t[e]=n,t))[e];i.setContextProperty(e,o)}),removeUserProperty:w(i.removeContextProperty),clearUser:w(i.clearContext)},t=S({version:"4.30.0",onReady:function(e){e()}},n),Object.defineProperty(t,"_setDebug",{get:function(){return h},enumerable:!1}),t}();et=(Qn=D()).DD_LOGS,Qn.DD_LOGS=tt,et&&et.q&&et.q.forEach(function(e){return V(e,"onReady callback threw an error:")()});var ot=/*#__PURE__*/function(){function e(e,n){tt.init({clientToken:n.clientToken,site:"datadoghq.com",forwardErrorsToLogs:!1,sampleRate:100,version:"ga4",service:"analytics-sdk",env:n.environment,useCrossSiteSessionCookie:!0,trackSessionAcrossSubdomains:!0,useSecureSessionCookie:!0,silentMultipleInit:!0}),tt.setLoggerGlobalContext({country:e})}return e.prototype.logError=function(e,n){tt.logger.error(e,n)},e}(),rt="1.17.0";function it(){return it=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},it.apply(this,arguments)}var ut={event:r,category:"book an appointment spa"},at=["bookanappointment.page_view","bookanappointment.next","bookanappointment.back","bookanappointment.create-appointment","bookanappointment.reserveproduct","bookanappointment.change-store"],ct="www.gucci.com"===window.location.hostname?{clientToken:"pub06c9294a47138de514fbc6e73bba7b13",environment:"prod"}:{clientToken:"pub06c9294a47138de514fbc6e73bba7b13",environment:"qa"};function st(e){var n={};if(!e)return n;var t=e.split("/");return 1===t.length&&""===t[0]?n:n=it({item_category:t[0]},t[1]&&{item_category2:t[1]},t[2]&&{item_category3:t[2]},t[3]&&{item_category4:t[3]},t[4]&&{item_category5:t[4]})}function lt(e){var n=window.localStorage.getItem("ga_cartItems");if(n)return JSON.parse(n).map(e)}function ft(e){var n=window.localStorage.getItem("ga_linkData");if(n){var t=JSON.parse(n);return"UNKNOWN"!==(t[e]?t[e].listName:"UNKNOWN")?t[e].listPage:""}}function dt(e,n){var t,o=void 0===e.brand?{item_brand:"unknown"}:{item_brand:e.brand},r=n.exchangeRate,i=e.price?r.convert(parseFloat(e.price)).toFixed(2):"",u=r.getCurrency();return it({item_id:e.id,item_name:e.name},o,{currency:u,index:e.position},st(e.category),{item_list_id:null!=(t=ft(e.id))?t:"",item_list_name:e.list,item_variant:e.variant,price:i,quantity:e.quantity})}function vt(e,n){var t,o,r,i=void 0===e.item_brand?{item_brand:"unknown"}:{item_brand:e.item_brand},u=n.exchangeRate,a=e.price?u.convert(parseFloat(e.price)).toFixed(2):"",c=u.getCurrency();return it({item_id:e.item_id,item_name:e.item_name},i,{currency:c,index:e.index},st(null!=(t=e.category)?t:function(e){if(!e)return"";if(!e.includes("/pr/"))return e;var n="";try{for(var t=e.substring(e.indexOf("/pr/")+3,e.length),o=t.substring(0,t.indexOf("-p-")),r=o.substring(0,o.lastIndexOf("/")),i=1;i<r.length;i++)RegExp("-|/").test(r[i-1])&&!RegExp("[0-9]").test(r[i])?n+=r[i].toUpperCase():n+=r[i]}catch(e){console.error("analyticsSdk: error parsing url to retrieve product category")}return n}(e.item_category)),{item_list_id:null!=(o=ft(e.item_id))?o:"",item_list_name:null!=(r=e.item_list_name)?r:e.item_list,item_variant:e.item_variant,price:a,quantity:e.quantity})}var pt=["ecommerce","checkout","shopping bag","flyout bag",""],yt=["cart page","cart overlay","back_to_search","enter_manually",""];function gt(e){return pt.includes(e)}function mt(e){return yt.includes(e)}var ht="lastPlacedOrderNumber",bt=function(){return window.sessionStorage.getItem(ht)},wt={MAX_LENGTH:20,JP_KR_LENGTH:10,COUNTRIES:["jp","kr"]},kt={event:r};function _t(e){var n,t,o,r;return it({},kt,{category:null==e||null==(n=e.event)?void 0:n.category,label:null==e||null==(t=e.event)?void 0:t.label,urlDestination:null==e||null==(o=e.event)?void 0:o.urlDestination,ctaLabel:null==e||null==(r=e.event)?void 0:r.ctaLabel})}var Ct=/*#__PURE__*/function(){function e(e){this.rate=void 0,this.rate=e}var n=e.prototype;return n.convert=function(e){return e/this.rate},n.getCurrency=function(){return"EUR"},e}(),St=new(/*#__PURE__*/function(){function e(){}return e.prototype.byCountry=function(e){var n;return null!=(n={ae:new Ct(3.929575),au:new Ct(1.48),ca:new Ct(1.35),ch:new Ct(1.02),hk:new Ct(8.346),jp:new Ct(140),kr:new Ct(1356),mx:new Ct(21.78),nz:new Ct(1.64),sa:new Ct(4.0125),sg:new Ct(1.47),th:new Ct(36.91),uk:new Ct(.87),us:new Ct(1.07),za:new Ct(17.5)}[e])?n:xt},e}()),xt=new Ct(1),Et=["funhouseNewsletter.submit","funhouseStoreLocator.submit","funhouseFooterIcon.clickGucciEquilibrium","funhouseFooterIcon.clickGucciGarden","funhouseFooterIcon.clickGucciOsteria","funhouseFooterIcon.clickAppleAppStore","funhouseFooterIcon.clickGooglePlay","funhouseFooterIcon.clickGucciApp","funhouseFooterLink.click","funhouseLanguageSelector.click","funhouseCountrySelector.click"],Tt={ae:"AED",au:"AUD",ca:"CAD",ch:"CHF",hk:"HKD",jp:"JPY",kr:"KRW",mx:"MXN",nz:"NZD",sa:"SAR",sg:"SGD",th:"THB",uk:"GBP",us:"USD",za:"ZAR"};function Lt(e){var n;return null!=(n=Tt[e])?n:"EUR"}var At=["funhouseMiniCart.emptyCart","funhouseMiniCart.notEmptyCart","funhouseMiniCart.clickOnShoppingBag","funhouseMiniCart.proceedToCheckout","funhouseMiniCart.closeCart","funhouseMyAccount.openFlyout","funhouseMyAccount.flyoutItemClick","funhouseLogo.click","funhouseSearch.click","funhouseContactUs.click"],Ot={event:r};function Rt(e){var n,t;return it({},Ot,{category:null==e||null==(n=e.event)?void 0:n.category,label:null==e||null==(t=e.event)?void 0:t.label})}function It(e){var n,t,o;return it({},Rt(e),{urlDestination:null==e||null==(n=e.event)?void 0:n.urlDestination,ctaLabel:null==e||null==(t=e.event)?void 0:t.ctaLabel,indexCarousel:(null==e||null==(o=e.event)?void 0:o.indexCarousel)||0})}function Pt(e){var n;return it({},Rt(e),{listOfLabels:null==e||null==(n=e.event)?void 0:n.listOfLabels})}var Mt=["emailSubscription.subscribe","emailSubscription.opt","myAccount.signIn","myAccount.signinErrors","myAccount.saveSettings","myAccount.saveSettingsError","myAccount.deleteAccount","myAccount.deleteAccountError","myAccount.createAccount","myAccount.createAccountErrors","myAccount.orderConfirmation","myAccount.checkout.skipLogin","myAccount.changeEmailFlowCreateAccount","myAccount.changeEmailAtValidation","gaTech","access.impression","access.click","returnFlow.delivery","returnFlow.collectInStore","returnFlow.vpv","orderHistory.ordersPage"],Bt={event:r};function Dt(e){var n,t,o,r;return it({},Bt,{category:null==e||null==(n=e.event)?void 0:n.category,label:null==e||null==(t=e.event)?void 0:t.label},null!=(null==e||null==(o=e.event)?void 0:o.totalCarousel)&&{totalCarousel:null==e||null==(r=e.event)?void 0:r.totalCarousel})}function Nt(e){var n,t,o,r,i;return it({},Dt(e),{urlDestination:null==e||null==(n=e.event)?void 0:n.urlDestination},null!=(null==e||null==(t=e.event)?void 0:t.ctaLabel)&&{ctaLabel:null==e||null==(o=e.event)?void 0:o.ctaLabel},null!=(null==e||null==(r=e.event)?void 0:r.indexCarousel)&&{indexCarousel:null==e||null==(i=e.event)?void 0:i.indexCarousel})}function qt(e){var n,t;return it({},null!=(null==e||null==(n=e.event)?void 0:n.indexCarouselDestination)&&{indexCarouselDestination:null==e||null==(t=e.event)?void 0:t.indexCarouselDestination})}function Ft(e){var n;return{direction:null==e||null==(n=e.event)?void 0:n.direction}}var Ut="product page",jt={event:r};function zt(e){var n,t,o,r,i,u;return it({},jt,{category:null==e||null==(n=e.event)?void 0:n.category,label:null==e||null==(t=e.event)?void 0:t.label,urlDestination:null==e||null==(o=e.event)?void 0:o.urlDestination,ctaLabel:null==e||null==(r=e.event)?void 0:r.ctaLabel,indexRouting:null==e||null==(i=e.event)?void 0:i.indexRouting,totalRouting:null==e||null==(u=e.event)?void 0:u.totalRouting})}function Gt(e,n,t,o){var r,i,u,a,c,s,l,f={event:o||"site_search",searchTerm:null!=t&&null!=(r=t.event)&&r.search_query?null==t||null==(i=t.event)?void 0:i.search_query:null==t||null==(u=t.event)?void 0:u.query,searchCat:null!=t&&null!=(a=t.event)&&a.search_category?null==t||null==(c=t.event)?void 0:c.search_category:null==t||null==(s=t.event)?void 0:s.label,searchOrigin:null==t||null==(l=t.event)?void 0:l.category,country:n.country};e.push(f)}function Ht(e,n,t){var o,i,u,a,c,s,l,f,d=it({event:r,action:null==n||null==(o=n.event)?void 0:o.action},(null==n||null==(i=n.event)?void 0:i.label)&&{label:null==n||null==(u=n.event)?void 0:u.label},(null==n||null==(a=n.event)?void 0:a.search_query)&&{search_query:null==n||null==(c=n.event)?void 0:c.search_query},(null==n||null==(s=n.event)?void 0:s.filter_name)&&{filter_name:null==n||null==(l=n.event)?void 0:l.filter_name},{category:null==n||null==(f=n.event)?void 0:f.category,country:t.country});e.push(d)}function Vt(e,n,t){var o,u,a,c,s=it({},(null==n||null==(o=n.event)?void 0:o.subject)&&{emailSubject:null==n||null==(u=n.event)?void 0:u.subject}),l=new i(r,"client services",null==n||null==(a=n.event)?void 0:a.action,null==n||null==(c=n.event)?void 0:c.label,t.country,s);e.push(l)}function Jt(e,n,t){var o,u,a,c,s,l,f,d,v,p=it({},(null==n||null==(o=n.event)?void 0:o.clientAdvisorId)&&{clientAdvisorId:null==n||null==(u=n.event)?void 0:u.clientAdvisorId},(null==n||null==(a=n.event)?void 0:a.clientAdvisorType)&&{clientAdvisorType:null==n||null==(c=n.event)?void 0:c.clientAdvisorType},(null==n||null==(s=n.event)?void 0:s.assignedStores)&&{assignedStores:null==n||null==(l=n.event)?void 0:l.assignedStores},(null==n||null==(f=n.event)?void 0:f.storeId)&&{storeId:null==n||null==(d=n.event)?void 0:d.storeId}),y=new i(r,"client-advisor",null==n||null==(v=n.event)?void 0:v.action,void 0,t.country,p);e.push(y)}var Zt=["funhouseNavigation.open","funhouseNavigation.close","funhouseNavigation.itemClick","funhouseNavigation.clickNavigationBottonLink"],Wt=["gucci.com","guccidigital.com","regiongold.com","localhost"],$t="search",Xt=function(e,n){return function(t){return a(e,u($t,function(e){var n=Wt.some(function(n){return e.includes(n)});if(""===e||!n)return"referral page";var t=new URL(e).pathname.slice(1).replace(/\/$/,"").split("/");switch(!0){case 2===t.length:return"home";case"st"===t[2]&&"newsearchpage"===t[3]:return"search";case"ca"===t[2]:return"category";case"co"===t[2]:return"collection";case"pr"===t[2]:return"product page";case"st"===t[2]&&"capsule"===t[3]:return"capsule";case"lo"===t[2]&&t[t.length-1].indexOf("-c-")>=0:return"looks grid";case"lo"===t[2]&&t[t.length-1].indexOf("-p-")>=0:return"look page";case"cart"===t[2]:return"shopping bag";case"checkout"===t[2]&&"orderConfirmation"===t[3]:return"order confirmation";case"store"===t[2]:return"store";case"wishlist"===t[2]&&"saved-items"===t[3]:return"saved items";default:return"other page"}}(t.event.referrer),t.event.query+" ("+t.event.hits+")"),n)}},Kt=function(e,n){return function(t){return a(e,u($t,"click on links on searchbox",t.event.label),n)}},Yt=new ot(oo(),ct),Qt=eo(oo());function eo(e){var o=St.byCountry(e),s=Lt(e),l=new n({country:e,currency:s,exchangeRate:o}),f=new c(t.dataLayer);return new Map([].concat(Array.from(function(e,n){return new Map([].concat(Array.from(new Map(at.map(function(t){return[t,function(t){return function(e,n,t){var o,r,i,u,a,c=it({},ut,{action:null==n||null==(o=n.event)?void 0:o.action,label:null==n||null==(r=n.event)?void 0:r.label,storeId:null==n||null==(i=n.event)?void 0:i.storeId,storeName:null==n||null==(u=n.event)?void 0:u.storeName},n&&n.event&&n.event.sku&&{sku:null==n||null==(a=n.event)?void 0:a.sku},{country:t.country});e.push(c)}(e,t,n)}]}))),[["bookanappointment.submitted",function(t){return function(e,n,t){var o,r,i,u,a,c,s=it({},ut,{action:"submitted",label:null==n||null==(o=n.event)?void 0:o.label,storeId:null==n||null==(r=n.event)?void 0:r.storeId,storeName:null==n||null==(i=n.event)?void 0:i.storeName,storeSlug:null==n||null==(u=n.event)?void 0:u.storeSlug},n&&n.event&&n.event.sku&&{sku:null==n||null==(a=n.event)?void 0:a.sku},{bookanappointment_code:null==n||null==(c=n.event)?void 0:c.bookanappointment_code,country:t.country});e.push(s)}(e,t,n)}],["bookanappointment.error",function(t){return function(e,n,t){var o,r,i,u,a,c=it({},ut,{action:"error",label:null==n||null==(o=n.event)?void 0:o.label,message:null==n||null==(r=n.event)?void 0:r.message,storeId:null==n||null==(i=n.event)?void 0:i.storeId,storeName:null==n||null==(u=n.event)?void 0:u.storeName},n&&n.event&&n.event.sku&&{sku:null==n||null==(a=n.event)?void 0:a.sku},{country:t.country});e.push(c)}(e,t,n)}]]))}(f,l).entries()),Array.from(function(e,n){var o=function(t){return a(e,t,n)};return new Map([["view_item_list",function(t){return function(e,n,t){for(var o=t.country,r=n.event.language,i=[].concat(n.event.items),u=wt.COUNTRIES.includes(o.toLowerCase())?wt.JP_KR_LENGTH:wt.MAX_LENGTH,a=n.event.item_list_id.replace("/"+o+"/"+r,"");i.length;){var c,s,l=i.splice(0,u),f={event:"view_item_list",category:"ecommerce",action:"productImpression",country:o,label:null!=(c=null==n||null==(s=n.event)?void 0:s.label)?c:"",item_list_id:a,item_list_name:n.event.item_list_name,items:l.map(function(e){return vt(e,t)}).map(function(e){return it({},e,{item_list_id:a})})};e.push(f)}}(e,t,n)}],["view_item",function(t){return function(e,n,t){var o,r,i={event:"view_item",category:"ecommerce",action:"viewProductDetail",country:t.country,label:null!=(o=null==n||null==(r=n.event)?void 0:r.label)?o:"",items:[vt(n.event,t)]};e.push(i)}(e,t,n)}],["select_item",function(t){return function(e,n,t){var o,r,i=n.event.item_list_id.replace("/"+n.event.country+"/"+n.event.language,""),u=n.event.items.map(function(e){return vt(e,t)}).map(function(e){return it({},e,{item_list_id:i})}),a={event:"select_item",category:"ecommerce",action:"productClick",country:t.country,label:null!=(o=null==n||null==(r=n.event)?void 0:r.label)?o:"",item_list_id:i,item_list_name:n.event.item_list_name,items:u};e.push(a)}(e,t,n)}],["add_to_cart",function(o){return function(e,n,t,o){var r,i,u,a=t.event,c=null!=(r=e.getViewItemProduct(null==a?void 0:a.item_id))?r:e.getViewItemListProduct(null==a?void 0:a.item_id);if(!c)throw new Error("viewItemProduct is missing from previous event in the funnel");var s={event:"add_to_cart",category:"ecommerce",action:"addToCart",country:o.country,label:null!=(i=null==t||null==(u=t.event)?void 0:u.label)?i:"",add_to_cart_type:null==a?void 0:a.addToCartType,items:[it({},c)]};n.push(s)}(t.dataLayer,e,o,n)}],["remove_from_cart",function(t){return function(e,n,t){var o,r,i={event:"remove_from_cart",category:"ecommerce",action:"removeFromCart",country:t.country,label:null!=(o=null==n||null==(r=n.event)?void 0:r.label)?o:"",items:[vt(n.event,t)]};e.push(i)}(e,t,n)}],["view_cart",function(t){return function(e,n,t){var o,r,i,u=null!=(o=null==n||null==(r=n.event)?void 0:r.label)?o:"",a={event:"view_cart",category:"ecommerce",action:"shoppingBagCheckout",label:u=mt(u)?u:"",country:t.country,items:null==n||null==(i=n.event)?void 0:i.items.map(function(e){return dt(e,t)})};e.push(a)}(e,t,n)}],["view_sign_in_info",function(t){return function(e,n,t){var o,r,i,u=null==(o=n.event)?void 0:o.items.map(function(e){return dt(e,t)});if(!u)throw new Error("productsInCart is missing from previous event in the funnel");var a={event:"view_sign_in_info",category:"ecommerce",action:"checkoutSignin",label:null!=(r=null==n||null==(i=n.event)?void 0:i.label)?r:"",items:u,country:t.country};e.push(a)}(e,t,n)}],["begin_checkout",function(t){return function(e,n,t){var o,r,i,u,a,c,s=null!=(o=null==n||null==(r=n.event)?void 0:r.category)?o:"";s=gt(s)?s:"";var l=null!=(i=null==n||null==(u=n.event)?void 0:u.label)?i:"";l=mt(l)?l:"";var f={event:"begin_checkout",category:s,action:null!=(a=null==n||null==(c=n.event)?void 0:c.action)?a:"",label:l,items:n.event.items.map(function(e){return dt(e,t)}),country:t.country};e.push(f)}(e,t,n)}],["autosuggestion_form",function(t){return function(e,n,t){var o,r,i,u,a,c,s=null!=(o=null==n||null==(r=n.event)?void 0:r.category)?o:"";s=gt(s)?s:"";var l=null!=(i=null==n||null==(u=n.event)?void 0:u.label)?i:"";l=mt(l)?l:"";var f={event:"autosuggestion_form",category:s,action:null!=(a=null==n||null==(c=n.event)?void 0:c.action)?a:"",label:l,country:t.country};e.push(f)}(e,t,n)}],["add_payment_info",function(t){return function(e,n,t){var o,r,i,u,a={event:"add_payment_info",category:"checkout",action:"checkoutOptions",label:"payment",payment_type:null==n||null==(o=n.event)?void 0:o.paymentOption,country:t.country,items:null!=(r=null==(i=n.event)||null==(u=i.items)?void 0:u.map(function(e){return dt(e,t)}))?r:lt(function(e){return dt(e,t)})};e.push(a)}(e,t,n)}],["view_shipping_info",function(t){return function(e,n){e.push({event:"view_shipping_info",category:"checkout",action:"checkoutView",label:"shipping",country:n.country})}(e,n)}],["add_shipping_info",function(o){return function(e,n,t,o){var r,i,u,a,c,s=null!=(r=t.event.deliveryMethod)?r:e.getDeliveryMethod(),l={event:"add_shipping_info",shipping_tier:null!=(i=t.event.shippingOption)?i:s+"-"+t.event.selectedShippingOption,category:"checkout",action:"checkoutOptions",label:"shipping",country:o.country,items:null!=(u=null==(a=t.event)||null==(c=a.items)?void 0:c.map(function(e){return dt(e,o)}))?u:lt(function(e){return dt(e,o)})};n.push(l)}(t.dataLayer,e,o,n)}],["view_gifting_info",function(t){return function(e,n,t){var o,r,i,u={event:"view_gifting_info",category:"checkout",action:"checkoutView",label:"gifting",country:t.country,items:null!=(o=null==(r=n.event)||null==(i=r.items)?void 0:i.map(function(e){return dt(e,t)}))?o:lt(function(e){return dt(e,t)})};e.push(u)}(e,t,n)}],["add_gifting_info",function(t){return function(e,n,t){var o,r,i,u,a,c={event:"add_gifting_info",category:"checkout",action:"checkoutOptions",label:"message_"+(null!=(o=null==(r=n.event)?void 0:r.message)&&o),country:t.country,items:null!=(i=null==(u=n.event)||null==(a=u.items)?void 0:a.map(function(e){return dt(e,t)}))?i:lt(function(e){return dt(e,t)})};e.push(c)}(e,t,n)}],["purchase",function(t){return function(e,n,t){var o=n.event.order_number;if(null===bt()||bt()!==o){window.sessionStorage.setItem(ht,o);var r=t.exchangeRate,i={event:"purchaseGA4",category:"ecommerce",action:"purchase",label:"",transaction_id:o,value:Number(r.convert(parseFloat(n.event.order_total_value)).toFixed(2)),tax:Number(r.convert(parseFloat(n.event.tax_amount)).toFixed(2)),shipping:Number(r.convert(parseFloat(n.event.shipping_amount)).toFixed(2)),currency:r.getCurrency(),purchaseShippingOption:n.event.purchaseShippingOption,purchasePaymentOption:n.event.purchasePaymentOption,purchasePackagingOption:n.event.purchasePackagingOption,purchaseGiftMessageOption:n.event.purchaseGiftMessageOption,country:t.country,fourGiftCodeAfter:n.event.fourGiftCodeAfter,items:n.event.items.map(function(e){return dt(e,t)})};e.push(i)}}(e,t,n)}],["place_order",function(t){return function(e,n){e.push({event:"place_order",category:"checkout",action:"checkoutclick",label:"place_order",country:n.country})}(e,n)}],["view_payment_info",function(t){return function(e,n){e.push({event:"view_payment_info",category:"checkout",action:"checkoutView",label:"payment",country:n.country})}(e,n)}],["add_sign_in_info",function(t){return function(e,n,t){e.push({event:"add_sign_in_info",category:"checkout",action:"checkoutOptions",label:"signIn",checkoutLoginType:n.event.checkoutLoginType,country:t.country})}(e,t,n)}],["save_to_wishlist_cart_item",o],["place_order_error",o],["edit_cart_item",o],["shipping_validation_error",o],["amazon_error",o],["payment_form_error",o],["paypal_express_cart",o],["amazon_express_cart",o],["checkout_sidebar",o],["four_gift_event",o],["merge_overlay",o],["jp_navigation_step",o],["collect-in-store",function(t){return function(e,n,t){var o,u,a,c,s,l,f,d,v,p,y=it({},(null==n||null==(o=n.event)?void 0:o.storeId)&&{storeId:null==n||null==(u=n.event)?void 0:u.storeId},(null==n||null==(a=n.event)?void 0:a.storeName)&&{storeName:null==n||null==(c=n.event)?void 0:c.storeName},(null==n||null==(s=n.event)?void 0:s.storeCity)&&{storeCity:null==n||null==(l=n.event)?void 0:l.storeCity},(null==n||null==(f=n.event)?void 0:f.storeState)&&{storeState:null==n||null==(d=n.event)?void 0:d.storeState}),g=new i(r,"checkout",null==n||null==(v=n.event)?void 0:v.action,null==n||null==(p=n.event)?void 0:p.label,t.country,y);e.push(g)}(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["herosinglecomponent.show",function(t){return function(e,n,t){var o=it({},It(n),{action:"displayHeroSingle",country:t.country});e.push(o)}(e,t,n)}],["herosinglecomponent.tap",function(t){return function(e,n,t){var o,r=it({},It(n),{action:"actionHeroSingle",actionElement:null==n||null==(o=n.event)?void 0:o.actionElement,country:t.country});e.push(r)}(e,t,n)}],["herocarouselcomponent.mouseover",function(t){return function(e,n,t){var o=it({},Pt(n),{action:"overHeroCarousel",country:t.country});e.push(o)}(e,t,n)}],["herocarouselcomponent.mouseclick",function(t){return function(e,n,t){var o=it({},Pt(n),{action:"actionHeroCarousel",country:t.country});e.push(o)}(e,t,n)}],["herosinglecomponent.videointeraction",function(t){return function(e,n,t){var o,r=it({},Rt(n),{action:null==n||null==(o=n.event)?void 0:o.action,country:t.country});e.push(r)}(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["routingupcomponent.show",function(t){return function(e,n,t){var o=it({},zt(n),{action:"displayRoutingUp",country:t.country});e.push(o)}(e,t,n)}],["routingupcomponent.tap",function(t){return function(e,n,t){var o,r=it({},zt(n),{action:"actionRoutingUp",actionElement:null==n||null==(o=n.event)?void 0:o.actionElement,country:t.country});e.push(r)}(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["featuredcomponent.show",function(t){return function(e,n,t){var o=it({},_t(n),{action:"displayFeatured",country:t.country});e.push(o)}(e,t,n)}],["featuredcomponent.tap",function(t){return function(e,n,t){var o,r=it({},_t(n),{action:"actionFeatured",actionElement:null==n||null==(o=n.event)?void 0:o.actionElement,country:t.country});e.push(r)}(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["productcomponent.show",function(t){return function(e,n,t){var o=it({},Nt(n),{action:"displayProductComponent",country:t.country});e.push(o)}(e,t,n)}],["productcomponent.tap",function(t){return function(e,n,t){var o,r,i=it({},Nt(n),{action:null!=n&&null!=(o=n.event)&&o.isCategory?"actionProductCategoryComponent":"actionProductComponent",actionElement:null==n||null==(r=n.event)?void 0:r.actionElement,country:t.country});e.push(i)}(e,t,n)}],["productcomponent.arrow.tap",function(t){return function(e,n,t){var o=it({},Dt(n),Ft(n),qt(n),{action:"actionProductComponentArrow",country:t.country});e.push(o)}(e,t,n)}],["productcomponent.arrow.over",function(t){return function(e,n,t){var o=it({},Dt(n),Ft(n),{action:"overProductComponentArrow",country:t.country});e.push(o)}(e,t,n)}],["productcomponent.bar",function(t){return function(e,n,t){var o=it({},Dt(n),qt(n),{action:"actionProductComponentBar",country:t.country});e.push(o)}(e,t,n)}],["productcomponent.drag",function(t){return function(e,n,t){var o=it({},Dt(n),qt(n),{action:"actionProductComponentDrag",country:t.country});e.push(o)}(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map(At.map(function(t){return[t,function(t){return a(e,t,n)}]}))}(f,l).entries()),Array.from(function(e,n){return new Map(Et.map(function(t){return[t,function(t){return a(e,t,n)}]}))}(f,l).entries()),Array.from(function(e,n){return new Map(Zt.map(function(t){return[t,function(t){return a(e,t,n)}]}))}(f,l).entries()),Array.from(function(e,n){return new Map([].concat(Array.from(new Map(Mt.map(function(t){return[t,function(t){return a(e,t,n)}]}))),[["myAccount.trackUserLogged",function(t){return function(e,n,t){var o,i,u,a,c,s,l,f,d,v,p,y,g=0;void 0!==(null==t||null==(o=t.event)||null==(i=o.data)?void 0:i.is_logged)&&(g=null!=t&&null!=(p=t.event)&&null!=(y=p.data)&&y.is_logged?1:0);var m={event:r,category:null!=(u=null==t||null==(a=t.event)?void 0:a.category)?u:"my account",action:null!=(c=null==t||null==(s=t.event)?void 0:s.action)?c:"track user logged",label:null==t||null==(l=t.event)?void 0:l.label,country:n.country,klientid:null!=(f=null==t||null==(d=t.event)||null==(v=d.data)?void 0:v.klientid)?f:"",userLogged:g};e.push(m)}(e,n,t)}]]))}(f,l).entries()),Array.from(function(e,n){return new Map([["storediscovery.stores-map-move",function(t){return Ht(e,t,n)}],["storediscovery.filter-stores",function(t){return Ht(e,t,n)}],["storediscovery.page_view",function(t){return Ht(e,t,n)}],["storediscovery.store-search",function(t){return Gt(e,n,t)}],["storediscovery.find-in-store-search",function(t){return Gt(e,n,t)}],["storediscovery.stores-map-zoom",function(t){return function(e,n,t){var o,i,u,a={event:r,action:null==n||null==(o=n.event)?void 0:o.zoom_type,label:null==n||null==(i=n.event)?void 0:i.action,category:null==n||null==(u=n.event)?void 0:u.category,country:t.country};e.push(a)}(e,t,n)}],["storediscovery.store-pin",function(t){return function(e,n,t){var o,u,a,c,s,l,f,d,v,p,y,g={storeName:null==n||null==(o=n.event)||null==(u=o.storeDetails)?void 0:u.name,storeCity:null==n||null==(a=n.event)||null==(c=a.storeDetails)?void 0:c.city,storeCountry:null==n||null==(s=n.event)||null==(l=s.storeDetails)?void 0:l.country,storeCategory:null==n||null==(f=n.event)||null==(d=f.storeDetails)?void 0:d.category},m=new i(r,null==n||null==(v=n.event)?void 0:v.category,null==n||null==(p=n.event)?void 0:p.action,null==n||null==(y=n.event)?void 0:y.label,t.country,g);e.push(m)}(e,t,n)}],["storediscovery.store-view-click",function(t){return function(e,n,t){var o,u,a,c,s,l,f,d,v,p,y,g=it({},(null==n||null==(o=n.event)||null==(u=o.storeDetails)?void 0:u.storeName)&&{storeName:null==n||null==(a=n.event)||null==(c=a.storeDetails)?void 0:c.storeName},(null==n||null==(s=n.event)||null==(l=s.storeDetails)?void 0:l.storeSlug)&&{storeSlug:null==n||null==(f=n.event)||null==(d=f.storeDetails)?void 0:d.storeSlug}),m=new i(r,null==n||null==(v=n.event)?void 0:v.category,null==n||null==(p=n.event)?void 0:p.action,null==n||null==(y=n.event)?void 0:y.label,t.country,g);e.push(m)}(e,t,n)}],["storediscovery.view_search_results",function(t){return Gt(e,n,t,"view_search_results")}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["clientServices.emailus",function(t){return Vt(e,t,n)}],["clientServices.clickToCall",function(t){return Vt(e,t,n)}],["clientServices.messageUs",function(t){return Vt(e,t,n)}],["clientServices.page_view",function(t){return Vt(e,t,n)}]])}(f,l).entries()),Array.from(function(e){var n=function(n){return function(e,n){var t,o;if(n&&n.event){var r=n.event.country,i=it({event:"genericEvent",category:"my gucci appointments",action:null==n||null==(t=n.event)?void 0:t.action,label:null==n||null==(o=n.event)?void 0:o.label},r&&{country:r});e.push(i)}}(e,n)};return new Map([["myappointmetsreminder.available",n],["myappointmetsreminder.seen",n],["myappointmetsreminder.click",n]])}(f).entries()),Array.from(function(e,n){var t=function(e,n){function t(t,o){a(e,u(Ut,t,o),n)}return{trackOpenSizeSelect:function(t){e.push({event:r,category:Ut,action:"click to open size select",label:t.event.styleCode,sizeOptions:t.event.sizeOptions,country:n.country})},trackScrollCarousel:function(t){e.push({event:r,category:Ut,action:"scroll alternative views",label:t.event.styleCode,indexCarousel:t.event.indexCarousel,country:n.country})},trackClickCarouselArrows:function(t){e.push({event:r,category:Ut,action:"click on arrows to navigate alternative views",label:t.event.styleCode,indexCarousel:t.event.indexCarousel,country:n.country})},trackClickSizeGuideLink:function(e){return t("click on size guide link in pdp",e.event.productCategory)},trackZoomIn:function(e){return t("zoom in",e.event.styleCode)},trackZoomInNextArrow:function(e){return t("zoom in - click on next arrow",e.event.styleCode)},trackZoomInPreviousArrow:function(e){return t("zoom in - click on previous arrow",e.event.styleCode)},trackZoomInProductDetailsButton:function(e){return t("zoom in - click on product details button",e.event.styleCode)},trackOpenVariationPanel:function(e){return t("click to open variation panel",e.event.styleCode)},trackClickPdpAccordion:function(e){return t("click on pdp accordion",e.event.accordionTitle)},trackScrollCrossSell:function(t){a(e,u("personalization","scroll item - CrossSell",t.event.label),n)},trackClickOnFindInStoreLink:function(e){return t("click on find in store link",e.event.styleCode)},trackClickOnFindInStoreButton:function(e){return t("click on find in store button",e.event.styleCode)},trackClickOnAddToCart:function(t){e.push({event:r,category:Ut,action:"click on addToCart",label:t.event.styleCode,sku:t.event.sku,country:n.country})},trackAddToCartFailed:function(t){e.push({event:r,category:Ut,action:"addToCart fail",label:t.event.styleCode,country:n.country,sku:t.event.sku,errorMessage:t.event.errorMessage})}}}(e,n);return new Map([["productPage.clickToOpenSizeSelect",t.trackOpenSizeSelect],["productPage.clickOnSizeGuideLinkInPdp",t.trackClickSizeGuideLink],["productPage.scrollAlternativeViews",t.trackScrollCarousel],["productPage.clickOnArrowsToNavigateAlternativeViews",t.trackClickCarouselArrows],["productPage.zoomIn",t.trackZoomIn],["productPage.zoomInClickOnNextArrow",t.trackZoomInNextArrow],["productPage.zoomInClickOnPreviousArrow",t.trackZoomInPreviousArrow],["productPage.zoomInClickOnProductDetailsButton",t.trackZoomInProductDetailsButton],["productPage.clickToOpenVariationPanel",t.trackOpenVariationPanel],["productPage.clickOnPdpAccordion",t.trackClickPdpAccordion],["personalization.scrollItemCrossSell",t.trackScrollCrossSell],["productPage.clickOnFindInStoreLink",t.trackClickOnFindInStoreLink],["productPage.clickOnFindInStoreButton",t.trackClickOnFindInStoreButton],["productPage.clickOnAddToCart",t.trackClickOnAddToCart],["productPage.addToCartFailed",t.trackAddToCartFailed]])}(f,l).entries()),Array.from(function(e,n){return new Map([["searchPage.clickOnLinksInSearchBox",Kt(e,n)],["searchPage.search",Xt(e,n)]])}(f,l).entries()),Array.from(function(e,n){return new Map([["generic.capsule",function(t){return a(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["gucciapp.appbanner.click",function(t){return a(e,u("app banner","click on app banner",t.event.label),n)}],["gucciapp.appbanner.show",function(t){return a(e,u("app banner","app banner shown",t.event.label),n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["clientAdvisor.openOverlay",function(t){return Jt(e,t,n)}],["clientAdvisor.startSession",function(t){return Jt(e,t,n)}],["clientAdvisor.changeStore",function(t){return Jt(e,t,n)}],["clientAdvisor.logout",function(t){return Jt(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["livechat",function(t){return a(e,t,n)}],["videochat",function(t){return function(e,n,t){var o;switch(n.event.action){case"tab_shown":o={event:r,label:"not started",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country};break;case"tab_closed":o={event:r,label:void 0!==n.event.callId?"available":"not started",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"customer"};break;case"tab_clicked":o={event:r,label:void 0!==n.event.callId?"closed":"not started",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"customer"};break;case"call_requested":o={event:r,label:"started",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"customer"};break;case"call_connected":case"call_resumed":o={event:r,label:"available",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"agent"};break;case"call_ended":o={event:r,label:"available",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"true"===n.event.userHangup?"customer":"agent"};break;case"call_hold":o={event:r,label:"on_hold",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"agent"};break;case"audio_toggled":o={event:r,label:"available",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"customer"};break;case"survey_feedback_submitted":case"survey_happy_clicked":case"survey_unhappy_clicked":o={event:r,label:"closed",action:n.event.action.replace("_"," "),category:n.event.category,country:t.country,videoCallActorType:"customer"};break;default:o={event:r,label:JSON.stringify(n),action:n.event.action,category:n.event.category,country:t.country}}e.push(o)}(e,t,n)}]])}(f,l).entries()),Array.from(function(e,n){return new Map([["distanceSales",function(t){return function(e,n,t){var o="purchase"===n.event.action,i=it({event:r,action:n.event.action},!o&&{label:n.event.label},{category:n.event.category,country:t.country},o&&{revenue:n.event.revenue},o&&{transactionId:n.event.label});e.push(i)}(e,t,n)}]])}(f,l).entries())))}var no=function(e){return{sendEvent:function(n){try{var t=eo(e).get(n.name);t&&t(n)}catch(e){var o=n.name+":"+(e instanceof Error?e.message:"string"==typeof e?e:e.message);Yt.logError("sendEvent error",{lib_version:rt,payload:n,error_message:o})}}}},to=no(oo());function oo(){return window.location.pathname.split("/")[1]}e.LIB_VERSION=rt,e.datadog=Yt,e.initTrackers=eo,e.initTracking=no,e.trackers=Qt,e.tracking=to});
